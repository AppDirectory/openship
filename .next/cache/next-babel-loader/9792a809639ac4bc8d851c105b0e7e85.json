{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport { Pane, Heading, Text, Avatar, Icon } from 'evergreen-ui';\nimport VariantSelector from './VariantSelector';\nimport Button from '../../common/Button';\n\nvar Product =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Product, _Component);\n\n  function Product(props) {\n    var _this;\n\n    _classCallCheck(this, Product);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Product).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOptionChange\", function (event) {\n      var product = _this.props.product;\n      var target = event.target;\n      var selectedOptions = _this.state.selectedOptions;\n      selectedOptions[target.name] = target.value;\n      var selectedVariant = product.variants.edges.find(function (variant) {\n        return variant.node.selectedOptions.every(function (selectedOption) {\n          return selectedOptions[selectedOption.name] === selectedOption.value;\n        });\n      }).node;\n\n      _this.setState({\n        selectedVariant: selectedVariant,\n        selectedVariantImage: selectedVariant.image.src\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleQuantityChange\", function (event) {\n      _this.setState({\n        selectedVariantQuantity: event.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleQuantityDown\", function () {\n      _this.setState(function (prevState) {\n        return {\n          selectedVariantQuantity: prevState.selectedVariantQuantity - 1 || 1\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleQuantityUp\", function () {\n      _this.setState(function (prevState) {\n        return {\n          selectedVariantQuantity: prevState.selectedVariantQuantity + 1\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"findImage\", function (images, variantId) {\n      var primary = images[0];\n      var image = images.filter(function (a) {\n        return a.variant_ids.includes(variantId);\n      })[0];\n      return (image || primary).src;\n    });\n\n    _this.state = {\n      selectedOptions: {},\n      selectedVariantQuantity: 1\n    };\n    return _this;\n  }\n\n  _createClass(Product, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      var product = this.props.product;\n      product.options.forEach(function (selector) {\n        _this2.setState(function (prevState) {\n          return {\n            selectedOptions: _objectSpread({}, prevState.selectedOptions, _defineProperty({}, selector.name, selector.values[0]))\n          };\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          product = _this$props.product,\n          addVariantToCart = _this$props.addVariantToCart,\n          atcDisabled = _this$props.atcDisabled;\n      var _this$state = this.state,\n          selectedVariantImage = _this$state.selectedVariantImage,\n          selectedVariantQuantity = _this$state.selectedVariantQuantity,\n          selectedVariant = _this$state.selectedVariant;\n      var variantImage = selectedVariantImage || product.images.edges[0].node.src;\n      var variant = selectedVariant || product.variants.edges[0].node;\n      var variantQuantity = selectedVariantQuantity || 1;\n      var variantSelectors = product.options.map(function (option) {\n        return React.createElement(VariantSelector, {\n          handleOptionChange: _this3.handleOptionChange,\n          key: option.id.toString(),\n          option: option\n        });\n      });\n      return React.createElement(React.Fragment, null, React.createElement(Pane, {\n        display: \"flex\",\n        alignItems: \"center\",\n        borderTop: \"0.1rem solid #dfe3e8\"\n      }, React.createElement(Pane, {\n        padding: 15\n      }, product.images.edges.length && React.createElement(Avatar, {\n        src: variantImage,\n        alt: \"\".concat(product.title, \" product shot\"),\n        borderStyle: \"solid\",\n        borderWidth: \"1px\",\n        borderRadius: 3,\n        borderColor: \"#e8e9ea\",\n        size: 90\n      })), React.createElement(Pane, {\n        padding: 15,\n        paddingLeft: 0,\n        marginTop: 3,\n        marginBottom: \"auto\"\n      }, React.createElement(Heading, {\n        size: 500\n      }, product.title), React.createElement(Heading, {\n        size: 400,\n        marginRight: 10,\n        color: \"green\"\n      }, \"$\", variant.price), React.createElement(Pane, {\n        display: \"flex\",\n        marginTop: 3,\n        marginBottom: 7\n      }, variantSelectors), !atcDisabled && React.createElement(Pane, {\n        display: \"flex\"\n      }, React.createElement(Pane, {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        paddingRight: 5\n      }, React.createElement(Pane, {\n        display: \"flex\",\n        paddingRight: 5,\n        height: 20\n      }, React.createElement(Pane, {\n        display: \"flex\",\n        alignItems: \"center\",\n        background: \"#f4f4f4\",\n        paddingX: 5,\n        borderRadius: 2,\n        boxShadow: \"0 0 2px rgba(67, 90, 111, 0.3)\"\n      }, React.createElement(Icon, {\n        color: \"#425A70\",\n        icon: \"minus\",\n        appearance: \"minimal\",\n        size: 12,\n        cursor: \"pointer\",\n        onClick: this.handleQuantityDown\n      }), React.createElement(Text, {\n        size: 300,\n        marginX: 9\n      }, selectedVariantQuantity), React.createElement(Icon, {\n        color: \"#425A70\",\n        icon: \"plus\",\n        appearance: \"minimal\",\n        size: 12,\n        cursor: \"pointer\",\n        onClick: this.handleQuantityUp\n      }))), React.createElement(Pane, {\n        height: 20\n      }, React.createElement(Button, {\n        boxShadow: \"0 0 2px rgba(67, 90, 111, 0.3)\",\n        intent: \"primary\",\n        height: 20,\n        onClick: function onClick() {\n          return addVariantToCart(variant.id, selectedVariantQuantity);\n        },\n        disabled: atcDisabled\n      }, \"Add to Cart\")))))));\n    }\n  }]);\n\n  return Product;\n}(Component);\n\nexport default Product;","map":null,"metadata":{},"sourceType":"module"}