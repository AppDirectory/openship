{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation updateZincToken($token: String!) {\\n    updateZincToken(token: $token) {\\n      zincToken\\n    }\\n  }\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation updateURL($url: String!) {\\n    updateURL(url: $url) {\\n      url\\n    }\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation createCustomer($userInput: Json!) {\\n    createCustomer(userInput: $userInput) {\\n      cardObj\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation updateSeller($userInput: Json!) {\\n    updateSeller(userInput: $userInput) {\\n      id\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport { useMutation, useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport { Box, Heading, Text, Icon, Button, Badge, Divider, InputGroup, Input, InputLeftElement, InputRightElement, useToast } from '@chakra-ui/core';\nimport sellerOnboarding from './sellerOnboarding';\nimport buyerOnboarding from './buyerOnboarding';\nimport AddCard from './AddCard';\nimport { CardStyle } from '../common/DefaultStyles';\nimport useMedia from '../common/useMedia';\nimport { CURRENT_USER_QUERY } from '../user/User';\nexport var UPDATE_SELLER_MUTATION = gql(_templateObject());\nvar CREATE_CUSTOMER_MUTATION = gql(_templateObject2());\nvar UPDATE_URL_MUTATION = gql(_templateObject3());\nvar UPDATE_ZINC_MUTATION = gql(_templateObject4());\n\nfunction stepCheck(user) {\n  if (!user.status) {\n    return 0;\n  }\n\n  if (!user.account) {\n    return 1;\n  }\n\n  return 2;\n}\n\nexport default function Shop() {\n  var _useState = useState(0),\n      selectedSetting = _useState[0],\n      setSelectedSetting = _useState[1];\n\n  var _useState2 = useState(0),\n      billSetting = _useState2[0],\n      setBillSetting = _useState2[1];\n\n  var _useState3 = useState(0),\n      developSetting = _useState3[0],\n      setDevelopSetting = _useState3[1];\n\n  var _useState4 = useState(false),\n      addCard = _useState4[0],\n      setAddCard = _useState4[1];\n\n  var _useState5 = useState(''),\n      shopName = _useState5[0],\n      setShopName = _useState5[1];\n\n  var _useState6 = useState(''),\n      reviews = _useState6[0],\n      setReviews = _useState6[1];\n\n  var _useState7 = useState(''),\n      threshold = _useState7[0],\n      setThreshold = _useState7[1];\n\n  var _useState8 = useState(''),\n      URL = _useState8[0],\n      setURL = _useState8[1];\n\n  var _useState9 = useState(''),\n      ZincToken = _useState9[0],\n      setZincToken = _useState9[1];\n\n  var stacked = useMedia('(min-width: 1090px)');\n  var toast = useToast();\n\n  var _useQuery = useQuery(CURRENT_USER_QUERY),\n      me = _useQuery.data.me;\n\n  var _useMutation = useMutation(CREATE_CUSTOMER_MUTATION, {\n    refetchQueries: [{\n      query: CURRENT_USER_QUERY\n    }]\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      _createCustomer = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      createCustomerError = _useMutation2$.error,\n      createCustomerLoading = _useMutation2$.loading;\n\n  var _useMutation3 = useMutation(UPDATE_SELLER_MUTATION, {\n    refetchQueries: [{\n      query: CURRENT_USER_QUERY\n    }]\n  }),\n      _useMutation4 = _slicedToArray(_useMutation3, 2),\n      updateSeller = _useMutation4[0],\n      _useMutation4$ = _useMutation4[1],\n      updateSellerError = _useMutation4$.error,\n      updateSellerLoading = _useMutation4$.loading;\n\n  var _useMutation5 = useMutation(UPDATE_URL_MUTATION, {\n    refetchQueries: [{\n      query: CURRENT_USER_QUERY\n    }]\n  }),\n      _useMutation6 = _slicedToArray(_useMutation5, 2),\n      updateURL = _useMutation6[0],\n      _useMutation6$ = _useMutation6[1],\n      updateURLError = _useMutation6$.error,\n      updateURLLoading = _useMutation6$.loading;\n\n  var _useMutation7 = useMutation(UPDATE_ZINC_MUTATION, {\n    refetchQueries: [{\n      query: CURRENT_USER_QUERY\n    }]\n  }),\n      _useMutation8 = _slicedToArray(_useMutation7, 2),\n      updateZincToken = _useMutation8[0],\n      _useMutation8$ = _useMutation8[1],\n      updateZincTokenError = _useMutation8$.error,\n      updateZincTokenLoading = _useMutation8$.loading;\n\n  if (!me) return null;\n  return __jsx(React.Fragment, null, __jsx(Box, {\n    display: \"flex\",\n    py: 4\n  }, __jsx(Box, {\n    flex: 1,\n    alignItems: \"center\",\n    display: \"flex\"\n  }, __jsx(Heading, {\n    fontSize: \"2xl\",\n    color: \"text\",\n    fontWeight: 500\n  }, \"Settings\"))), __jsx(Box, null, __jsx(Box, {\n    display: \"flex\",\n    alignItems: \"center\"\n  }, __jsx(Heading, {\n    fontSize: \"xl\",\n    fontWeight: 600,\n    color: \"#435567\"\n  }, \"Development\")), __jsx(Text, {\n    fontSize: \"md\",\n    color: \"gray.600\"\n  }, \"Manage developmental options\")), __jsx(Divider, {\n    borderColor: \"gray.400\",\n    my: 4\n  }), __jsx(Box, _extends({\n    marginBottom: 15\n  }, stacked && {\n    display: 'flex',\n    alignItems: 'flex-start'\n  }), __jsx(Box, {\n    marginBottom: 4,\n    flexBasis: 280\n  }, __jsx(Box, {\n    display: \"flex\",\n    flexDirection: stacked ? 'column' : 'row',\n    mr: stacked && 2,\n    mb: stacked && 5\n  }, ['URL', 'Zinc Token'].map(function (tab, index) {\n    return __jsx(Box, {\n      p: 2,\n      mr: 2,\n      mt: 2,\n      borderRadius: 2,\n      bg: index === developSetting && '#e1eaf4',\n      onClick: function onClick() {\n        return setDevelopSetting(index);\n      },\n      cursor: \"pointer\",\n      display: \"flex\",\n      alignItems: \"center\"\n    }, __jsx(Heading, {\n      fontSize: \"md\",\n      fontWeight: 600,\n      color: index === developSetting ? '#1070ca' : 'gray.500'\n    }, tab));\n  }))), __jsx(Box, {\n    backgroundColor: \"gray.50\",\n    marginBottom: 35,\n    borderRadius: 3,\n    boxShadow: \"sm\",\n    padding: 4,\n    flex: \"1\"\n  }, ['URL', 'Zinc Token'].map(function (tab, index) {\n    return __jsx(Box, {\n      key: tab,\n      id: \"Boxl-\".concat(tab),\n      role: \"tabBoxl\",\n      \"aria-labelledby\": tab,\n      \"aria-hidden\": index !== developSetting,\n      display: index === developSetting ? 'block' : 'none'\n    }, index === 0 && __jsx(InputGroup, {\n      size: \"md\"\n    }, __jsx(Input, {\n      id: \"sshop\",\n      name: \"sshop\",\n      pr: \"4.5rem\",\n      pl: \"2.4rem\",\n      placeholder: \"https://www.yourcustomfrontend.com\",\n      borderColor: \"gray.300\",\n      value: URL || me.url,\n      onChange: function onChange(e) {\n        return setURL(e.target.value);\n      },\n      color: \"gray.700\"\n    }), __jsx(InputLeftElement, {\n      children: __jsx(Icon, {\n        name: \"code\",\n        color: \"gray.400\"\n      })\n    }), __jsx(InputRightElement, {\n      width: \"4.5rem\"\n    }, __jsx(Button, {\n      type: \"submit\",\n      h: \"1.75rem\",\n      size: \"sm\",\n      variantColor: \"green\",\n      onClick: function _callee() {\n        return _regeneratorRuntime.async(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _regeneratorRuntime.awrap(updateURL({\n                  variables: {\n                    url: URL\n                  }\n                }));\n\n              case 2:\n                toast({\n                  position: 'top-right',\n                  title: 'URL has been saved',\n                  status: 'success',\n                  duration: 2000,\n                  isClosable: true\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      },\n      disabled: !URL || me.url === URL,\n      isLoading: updateURLLoading\n    }, \"SAVE\"))), index === 1 && __jsx(InputGroup, null, __jsx(Input, {\n      id: \"api\",\n      name: \"api\",\n      pr: \"4.5rem\",\n      pl: \"2.4rem\",\n      placeholder: \"000000000000000000000000\",\n      borderColor: \"gray.300\",\n      value: ZincToken || me.zincToken,\n      onChange: function onChange(e) {\n        return setZincToken(e.target.value);\n      },\n      color: \"gray.700\"\n    }), __jsx(InputLeftElement, {\n      children: __jsx(Icon, {\n        name: \"code\",\n        color: \"gray.400\"\n      })\n    }), __jsx(InputRightElement, {\n      width: \"4.5rem\"\n    }, __jsx(Button, {\n      type: \"submit\",\n      h: \"1.75rem\",\n      size: \"sm\",\n      variantColor: \"green\",\n      onClick: function _callee2() {\n        return _regeneratorRuntime.async(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _regeneratorRuntime.awrap(updateZincToken({\n                  variables: {\n                    token: ZincToken\n                  }\n                }));\n\n              case 2:\n                toast({\n                  position: 'top-right',\n                  title: 'Token has been saved',\n                  status: 'success',\n                  duration: 2000,\n                  isClosable: true\n                });\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      },\n      disabled: !ZincToken || me.zincToken === ZincToken,\n      isLoading: updateZincTokenLoading\n    }, \"SAVE\"))));\n  }))), __jsx(Box, null, __jsx(Box, {\n    display: \"flex\",\n    alignItems: \"center\"\n  }, __jsx(Heading, {\n    fontSize: \"xl\",\n    fontWeight: 600,\n    color: \"#435567\"\n  }, \"Marketplace\"), __jsx(Badge, {\n    ml: 3,\n    variant: \"solid\",\n    variantColor: \"blue\"\n  }, \"\\u03B2eta\")), __jsx(Text, {\n    fontSize: \"md\",\n    color: \"gray.600\"\n  }, \"Manage marketplace buying and selling options\")), __jsx(Divider, {\n    borderColor: \"gray.400\",\n    my: 4\n  }), __jsx(Box, null, __jsx(Box, _extends({\n    marginBottom: 35\n  }, stacked && {\n    display: 'flex'\n  }), __jsx(Box, {\n    marginBottom: 4,\n    flexBasis: 280\n  }, __jsx(Box, {\n    display: \"flex\",\n    flexDirection: stacked ? 'column' : 'row',\n    mr: stacked && 2,\n    mb: stacked && 5\n  }, ['Buyer', 'Seller'].map(function (tab, index) {\n    return __jsx(Box, {\n      p: 2,\n      mr: 2,\n      mt: 2,\n      borderRadius: 2,\n      bg: index === selectedSetting && '#e1eaf4',\n      onClick: function onClick() {\n        return setSelectedSetting(index);\n      },\n      cursor: \"pointer\",\n      display: \"flex\",\n      alignItems: \"center\"\n    }, __jsx(Heading, {\n      fontSize: \"md\",\n      fontWeight: 600,\n      color: index === selectedSetting ? '#1070ca' : 'gray.500'\n    }, tab));\n  }))), __jsx(Box, {\n    background: \"white\",\n    flex: \"1\"\n  }, ['Buyer', 'Seller'].map(function (tab, index) {\n    return __jsx(Box, {\n      key: tab,\n      id: \"Boxl-\".concat(tab),\n      role: \"tabBoxl\",\n      \"aria-labelledby\": tab,\n      \"aria-hidden\": index !== selectedSetting,\n      display: index === selectedSetting ? 'block' : 'none'\n    }, index === 0 && buyerOnboarding({\n      buyerStep: me.buyer ? stepCheck(me.buyer) : 0,\n      requested: me.buyer && me.buyer.questions,\n      shopName: shopName,\n      setShopName: setShopName,\n      reviews: reviews,\n      setReviews: setReviews,\n      threshold: threshold,\n      setThreshold: setThreshold,\n      error: createCustomerError,\n      loading: createCustomerLoading,\n      createCustomer: _createCustomer,\n      addCardComp: __jsx(AddCard, {\n        createCustomer: function createCustomer() {\n          return _createCustomer;\n        }\n      })\n    }), index === 1 && sellerOnboarding({\n      sellerStep: me.seller ? stepCheck(me.seller) : 0,\n      requested: me.seller && me.seller.questions,\n      id: me.id,\n      shopName: shopName,\n      setShopName: setShopName,\n      reviews: reviews,\n      setReviews: setReviews,\n      threshold: threshold,\n      setThreshold: setThreshold,\n      error: updateSellerError,\n      loading: updateSellerLoading,\n      updateSeller: updateSeller\n    }));\n  }))), __jsx(Box, null, __jsx(Box, {\n    display: \"flex\",\n    alignItems: \"center\"\n  }, __jsx(Heading, {\n    fontSize: \"xl\",\n    fontWeight: 600,\n    color: \"#435567\"\n  }, \"Billing\")), __jsx(Text, {\n    fontSize: \"md\",\n    color: \"gray.600\"\n  }, \"Manage plans and payment methods\")), __jsx(Divider, {\n    borderColor: \"gray.400\",\n    my: 4\n  }), __jsx(Box, _extends({\n    marginBottom: 15\n  }, stacked && {\n    display: 'flex'\n  }), __jsx(Box, {\n    marginBottom: 4,\n    flexBasis: 280\n  }, __jsx(Box, {\n    display: \"flex\",\n    flexDirection: stacked ? 'column' : 'row',\n    mr: stacked && 2,\n    mb: stacked && 5\n  }, ['Payment Methods'].map(function (tab, index) {\n    return __jsx(Box, {\n      p: 2,\n      mr: 2,\n      mt: 2,\n      borderRadius: 2,\n      bg: index === billSetting && '#e1eaf4',\n      onClick: function onClick() {\n        return setBillSetting(index);\n      },\n      cursor: \"pointer\",\n      display: \"flex\",\n      alignItems: \"center\"\n    }, __jsx(Heading, {\n      fontSize: \"md\",\n      fontWeight: 600,\n      color: index === billSetting ? '#1070ca' : 'gray.500',\n      mr: 2\n    }, tab), index === 0 && __jsx(Button, {\n      variantColor: \"blue\",\n      backgroundImage: \"linear-gradient(rgb(7, 136, 222), rgb(17, 106, 184));\",\n      borderRadius: \"999px\",\n      height: \"18px\",\n      minWidth: \"18px\",\n      px: 0,\n      ml: \"auto\",\n      onClick: function onClick() {\n        return setAddCard(!addCard);\n      }\n    }, __jsx(Icon, {\n      size: \"1.1rem\",\n      name: \"small-add\"\n    })));\n  }))), __jsx(Box, _extends({}, CardStyle, {\n    padding: 25,\n    background: \"tint1\",\n    flex: \"1\"\n  }), ['Payment Methods'].map(function (tab, index) {\n    return __jsx(Box, {\n      key: tab,\n      id: \"Boxl-\".concat(tab),\n      \"aria-labelledby\": tab,\n      \"aria-hidden\": index !== billSetting,\n      display: index === billSetting ? 'block' : 'none'\n    }, index === 0 && __jsx(React.Fragment, null, addCard && __jsx(Box, {\n      backgroundColor: \"#f5f6f7\",\n      marginBottom: 15,\n      borderRadius: 5,\n      elevation: 1,\n      transition: \"opacity .15s linear\"\n    }, __jsx(AddCard, {\n      createCustomer: function createCustomer() {\n        return _createCustomer;\n      }\n    })), me.buyer && me.buyer.account && me.buyer.account.sources ? me.buyer.account.sources.data.map(function (card) {\n      return __jsx(Box, {\n        backgroundColor: \"#f5f6f7\",\n        borderRadius: 5,\n        padding: 2,\n        display: \"flex\",\n        alignItems: \"center\",\n        boxShadow: \"sm\"\n      }, __jsx(Box, {\n        width: 30,\n        height: 30,\n        marginX: 4\n      }, __jsx(\"svg\", {\n        version: \"1.1\",\n        xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n        x: \"0px\",\n        y: \"0px\",\n        viewBox: \"0 0 291.791 291.791\",\n        style: {\n          enableBackground: 'new 0 0 291.791 291.791'\n        },\n        xmlSpace: \"preserve\"\n      }, __jsx(\"path\", {\n        style: {\n          fill: '#E2574C'\n        },\n        d: \"M182.298 145.895c0 50.366-40.801 91.176-91.149 91.176S0 196.252 0 145.895s40.811-91.176 91.149-91.176 91.149 40.819 91.149 91.176z\"\n      }), __jsx(\"path\", {\n        style: {\n          fill: '#F4B459'\n        },\n        d: \"M200.616 54.719c-20.442 0-39.261 6.811-54.469 18.181l.073.009c2.991 2.89 6.291 4.924 8.835 8.251l-18.965.301c-2.972 3-5.68 6.264-8.233 9.656H161.3c2.544 3.054 4.896 5.708 7.03 9.081h-46.536c-1.705 2.936-3.282 5.954-4.659 9.09h56.493c1.477 3.127 2.799 5.489 3.921 8.799h-63.76a87.809 87.809 0 0 0-2.535 9.646h68.966c.675 3.155 1.194 6.072 1.55 9.045h-71.884c-.301 3-.456 6.045-.456 9.118h72.859c0 3.228-.228 6.218-.556 9.118h-71.847c.31 3.091.766 6.127 1.368 9.118h68.856a107.579 107.579 0 0 1-2.562 9.008h-63.969c.966 3.118 2.143 6.145 3.428 9.099h56.621c-1.568 3.319-3.346 5.972-5.306 9.081h-46.691a88.709 88.709 0 0 0 6.081 9.154l33.589.501c-2.863 3.437-6.537 5.507-9.884 8.516.182.146-5.352-.018-16.248-.191 16.576 17.105 39.744 27.772 65.446 27.772 50.357 0 91.176-40.82 91.176-91.176s-40.81-91.177-91.175-91.177z\"\n      }))), __jsx(Text, {\n        fontSize: \"sm\",\n        color: \"gray.700\"\n      }, \"ending in \", card.last4), __jsx(Text, {\n        fontSize: \"sm\",\n        marginLeft: \"auto\",\n        marginRight: 4,\n        color: \"#66788A\"\n      }, card.exp_month, \"/\", card.exp_year), __jsx(Button, {\n        variantColor: \"blue\",\n        variant: \"ghost\",\n        letterSpacing: \"wider\",\n        fontWeight: 700\n      }, \"UPDATE\"));\n    }) : __jsx(Box, {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      flexDirection: \"column\",\n      borderRadius: 3\n    }, __jsx(Heading, {\n      margin: \"1em\",\n      size: 600\n    }, \"No Payment Methods Added.\"))));\n  })))));\n}","map":null,"metadata":{},"sourceType":"module"}