{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport { Pane, Heading, Text, Avatar, Icon } from 'evergreen-ui';\nimport VariantSelector from './VariantSelector';\nimport Button from '../../common/Button';\n\nclass Product extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleOptionChange\", event => {\n      const {\n        product\n      } = this.props;\n      const {\n        target\n      } = event;\n      const {\n        selectedOptions\n      } = this.state;\n      selectedOptions[target.name] = target.value;\n      const selectedVariant = product.variants.edges.find(variant => variant.node.selectedOptions.every(selectedOption => selectedOptions[selectedOption.name] === selectedOption.value)).node;\n      this.setState({\n        selectedVariant,\n        selectedVariantImage: selectedVariant.image.src\n      });\n    });\n\n    _defineProperty(this, \"handleQuantityChange\", event => {\n      this.setState({\n        selectedVariantQuantity: event.target.value\n      });\n    });\n\n    _defineProperty(this, \"handleQuantityDown\", () => {\n      this.setState(prevState => ({\n        selectedVariantQuantity: prevState.selectedVariantQuantity - 1 || 1\n      }));\n    });\n\n    _defineProperty(this, \"handleQuantityUp\", () => {\n      this.setState(prevState => ({\n        selectedVariantQuantity: prevState.selectedVariantQuantity + 1\n      }));\n    });\n\n    _defineProperty(this, \"findImage\", (images, variantId) => {\n      const primary = images[0];\n      const image = images.filter(function (a) {\n        return a.variant_ids.includes(variantId);\n      })[0];\n      return (image || primary).src;\n    });\n\n    this.state = {\n      selectedOptions: {},\n      selectedVariantQuantity: 1\n    };\n  }\n\n  componentWillMount() {\n    const {\n      product\n    } = this.props;\n    product.options.forEach(selector => {\n      this.setState(prevState => ({\n        selectedOptions: _objectSpread({}, prevState.selectedOptions, {\n          [selector.name]: selector.values[0]\n        })\n      }));\n    });\n  }\n\n  render() {\n    const {\n      product,\n      addVariantToCart,\n      atcDisabled,\n      addWidget\n    } = this.props;\n    const {\n      selectedVariantImage,\n      selectedVariantQuantity,\n      selectedVariant\n    } = this.state;\n    const variantImage = selectedVariantImage || product.images.edges[0].node.src;\n    const variant = selectedVariant || product.variants.edges[0].node;\n    const variantQuantity = selectedVariantQuantity || 1;\n    const variantSelectors = product.options.map(option => React.createElement(VariantSelector, {\n      handleOptionChange: this.handleOptionChange,\n      key: option.id.toString(),\n      option: option\n    }));\n    return React.createElement(React.Fragment, null, React.createElement(Pane, {\n      display: \"flex\",\n      alignItems: \"center\",\n      borderTop: \"0.1rem solid #dfe3e8\"\n    }, React.createElement(Pane, {\n      padding: 15\n    }, product.images.edges.length && React.createElement(Avatar, {\n      src: variantImage,\n      alt: `${product.title} product shot`,\n      borderStyle: \"solid\",\n      borderWidth: \"1px\",\n      borderRadius: 3,\n      borderColor: \"#e8e9ea\",\n      size: 90\n    })), React.createElement(Pane, {\n      padding: 15,\n      paddingLeft: 0,\n      marginTop: 3,\n      marginBottom: \"auto\"\n    }, React.createElement(Heading, {\n      size: 500\n    }, product.title), React.createElement(Heading, {\n      size: 400,\n      marginRight: 10,\n      color: \"green\"\n    }, \"$\", variant.price), React.createElement(Pane, {\n      display: \"flex\",\n      marginTop: 3,\n      marginBottom: 7\n    }, variantSelectors), addWidget && React.createElement(Pane, {\n      display: \"flex\"\n    }, React.createElement(Pane, {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      paddingRight: 5\n    }, React.createElement(Pane, {\n      display: \"flex\",\n      paddingRight: 5,\n      height: 20\n    }, React.createElement(Pane, {\n      display: \"flex\",\n      alignItems: \"center\",\n      background: \"#f4f4f4\",\n      paddingX: 5,\n      borderRadius: 2,\n      boxShadow: \"0 0 2px rgba(67, 90, 111, 0.3)\"\n    }, React.createElement(Icon, {\n      color: \"#425A70\",\n      icon: \"minus\",\n      appearance: \"minimal\",\n      size: 12,\n      cursor: \"pointer\",\n      onClick: this.handleQuantityDown\n    }), React.createElement(Text, {\n      size: 300,\n      marginX: 9\n    }, selectedVariantQuantity), React.createElement(Icon, {\n      color: \"#425A70\",\n      icon: \"plus\",\n      appearance: \"minimal\",\n      size: 12,\n      cursor: \"pointer\",\n      onClick: this.handleQuantityUp\n    }))), React.createElement(Pane, {\n      height: 20\n    }, React.createElement(Button, {\n      boxShadow: \"0 0 2px rgba(67, 90, 111, 0.3)\",\n      intent: \"primary\",\n      height: 20,\n      onClick: () => addVariantToCart(variant.id, selectedVariantQuantity),\n      disabled: atcDisabled\n    }, \"Add to Cart\")))))));\n  }\n\n}\n\nexport default Product;","map":null,"metadata":{},"sourceType":"module"}