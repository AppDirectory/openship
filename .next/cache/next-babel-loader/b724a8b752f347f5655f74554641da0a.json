{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  query getItemGroup($itemID: String) {\\n    getItemGroup(itemID: $itemID) {\\n      item\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query getItems(\\n    $search: String\\n    $limit: Int\\n    $sort: String\\n    $pageNum: Int\\n    $exclude: Json\\n    $include: Json\\n    $priceCurrency: String\\n    $price: String\\n    $itemLocationCountry: String\\n  ) {\\n    getItems(\\n      search: $search\\n      limit: $limit\\n      sort: $sort\\n      pageNum: $pageNum\\n      exclude: $exclude\\n      include: $include\\n      priceCurrency: $priceCurrency\\n      price: $price\\n      itemLocationCountry: $itemLocationCountry\\n    ) {\\n      item\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport Link from 'next/link';\nimport { gql } from 'apollo-boost';\nimport { Pane, Heading, Text, SearchInput, Icon, TextInput, IconButton, Spinner, TagInput, toaster, Tablist, Tab, Avatar } from 'evergreen-ui';\nimport PropTypes from 'prop-types';\nimport { Query } from 'react-apollo';\nimport Product from './findListItem/Product';\nimport AmzProduct from './findListItem/AmzProduct';\nimport User from '../user/User';\nimport Pagination from '../common/Pagination';\nimport TextButton from '../common/Button';\nimport { CardStyle } from '../common/DefaultStyles';\nimport { front, prodFront } from '../../config';\nvar getItems = gql(_templateObject());\nexport var getItemGroup = gql(_templateObject2());\nvar sortOptions = [{\n  label: 'Lowest Price',\n  value: 'price'\n}, {\n  label: 'Highest Price',\n  value: '-price'\n}, {\n  label: 'Best Match',\n  value: 'match'\n}];\n\nvar option = function option(name, options, update, selected) {\n  return React.createElement(Pane, {\n    marginBottom: 10,\n    marginRight: 10\n  }, React.createElement(Heading, {\n    size: 500,\n    fontSize: \"12px\",\n    fontWeight: 500,\n    marginBottom: 2\n  }, name), React.createElement(Tablist, null, options.map(function (a, index) {\n    return React.createElement(Tab, {\n      key: a,\n      id: a,\n      marginLeft: 0,\n      height: \"20px\",\n      fontSize: \"10px\",\n      marginBottom: 3,\n      letterSpacing: \"0.3px\",\n      fontWeight: 400,\n      textTransform: \"uppercase\",\n      onSelect: function onSelect() {\n        return update(a);\n      },\n      isSelected: a === selected,\n      \"aria-controls\": \"panel-\".concat(a)\n    }, a);\n  })));\n};\n\nvar Find =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Find, _Component);\n\n  function Find() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Find);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Find)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      sort: {\n        label: 'Lowest Price',\n        value: 'price'\n      },\n      searchBar: '',\n      searchEntry: null,\n      limit: 10,\n      pageNum: 0,\n      min: '',\n      max: '',\n      price: null,\n      priceCurrency: 'USD',\n      itemLocationCountry: 'US',\n      include: [],\n      exclude: [],\n      selectedChannel: 'zinc',\n      zincResults: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"zincSearch\", function (searchEntry, token) {\n      console.log('called');\n      fetch(\"\".concat(process.env.NODE_ENV === 'development' ? front : prodFront, \"/api/zinc/search?query=\").concat(searchEntry, \"&token=\").concat(token)).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        return _this.setState({\n          zincResults: json\n        });\n      })[\"catch\"](function (error) {\n        return console.log('Error: ', error);\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Find, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          headerSize = _this$props.headerSize,\n          atcDisabled = _this$props.atcDisabled,\n          addMPItem = _this$props.addMPItem,\n          _addZincItem = _this$props.addZincItem;\n      var _this$state = this.state,\n          pageNum = _this$state.pageNum,\n          searchBar = _this$state.searchBar,\n          sort = _this$state.sort,\n          limit = _this$state.limit,\n          itemLocationCountry = _this$state.itemLocationCountry,\n          selectedChannel = _this$state.selectedChannel,\n          min = _this$state.min,\n          max = _this$state.max,\n          include = _this$state.include,\n          exclude = _this$state.exclude,\n          searchEntry = _this$state.searchEntry,\n          priceCurrency = _this$state.priceCurrency,\n          price = _this$state.price,\n          zincResults = _this$state.zincResults;\n      return React.createElement(React.Fragment, null, React.createElement(Pane, {\n        display: \"flex\",\n        paddingTop: 16,\n        paddingBottom: 16\n      }, React.createElement(Pane, {\n        flex: 1,\n        alignItems: \"center\",\n        display: \"flex\"\n      }, React.createElement(Heading, {\n        size: headerSize || 700\n      }, \"Marketplace\"))), React.createElement(Pane, _extends({}, CardStyle, {\n        background: \"white\"\n      }), React.createElement(User, null, function (_ref) {\n        var me = _ref.data.me;\n        if (!me) return null;\n\n        if (me.buyer && me.buyer.status) {\n          return React.createElement(React.Fragment, null, React.createElement(Pane, {\n            display: \"flex\",\n            paddingX: \"1em\",\n            paddingY: \"1em\",\n            flexWrap: \"wrap\"\n          }, React.createElement(Pagination, {\n            leftDisabled: pageNum === 0,\n            onLeft: function onLeft() {\n              return _this2.setState(function (state) {\n                return {\n                  pageNum: state.pageNum - 1\n                };\n              });\n            },\n            onRight: function onRight() {\n              return _this2.setState(function (state) {\n                return {\n                  pageNum: state.pageNum + 1\n                };\n              });\n            }\n          }), React.createElement(Pane, {\n            flex: 1\n          }, React.createElement(SearchInput, {\n            placeholder: \"Search\",\n            boxShadow: \"none\",\n            width: \"100%\",\n            height: 36,\n            value: searchBar,\n            onChange: function onChange(e) {\n              return _this2.setState({\n                searchBar: e.target.value,\n                pageNum: 0\n              });\n            },\n            onKeyPress: function onKeyPress(e) {\n              if (e.key === 'Enter') {\n                _this2.setState(function (state) {\n                  return {\n                    searchEntry: state.searchBar\n                  };\n                });\n\n                if (selectedChannel === 'zinc') {\n                  _this2.zincSearch(searchBar, me.zincToken);\n                }\n              }\n            }\n          }))), React.createElement(Pane, {\n            display: \"flex\",\n            flexWrap: \"wrap\",\n            background: \"#f5f5f5\",\n            paddingY: \".7em\",\n            paddingX: \"1em\"\n          }, option('Channel', ['zinc', 'marketplace'], function (a) {\n            return _this2.setState({\n              selectedChannel: a\n            });\n          }, selectedChannel), option('Location', ['US', 'CN', 'All'], function (a) {\n            return _this2.setState({\n              itemLocationCountry: a\n            });\n          }, itemLocationCountry), option('Items per page', [10, 50, 100], function (a) {\n            return _this2.setState({\n              limit: a\n            });\n          }, limit)), searchEntry && selectedChannel === 'marketplace' && React.createElement(Query, {\n            query: getItems,\n            variables: {\n              search: searchEntry,\n              limit: limit,\n              sort: sort.value,\n              pageNum: pageNum,\n              exclude: exclude,\n              include: include,\n              priceCurrency: priceCurrency,\n              price: price,\n              itemLocationCountry: itemLocationCountry\n            }\n          }, function (_ref2) {\n            var data = _ref2.data,\n                error = _ref2.error,\n                loading = _ref2.loading;\n            if (loading) return React.createElement(Pane, {\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              height: \"100vh\"\n            }, React.createElement(Spinner, {\n              size: 80\n            }));\n            if (error || !data.getItems.item || data.getItems.item.length < 1) return React.createElement(Pane, {\n              paddingX: \"1em\",\n              paddingBottom: \"1em\"\n            }, React.createElement(Pane, {\n              background: \"tint2\",\n              display: \"flex\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n              flexDirection: \"column\",\n              borderRadius: 3\n            }, React.createElement(Heading, {\n              margin: \"1em\",\n              size: 600\n            }, \"No items found.\")));\n            return React.createElement(React.Fragment, null, data.getItems.item.data.products.edges.map(function (product) {\n              return React.createElement(Product, {\n                addVariantToCart: function addVariantToCart(a, b) {\n                  return addMPItem(a, b);\n                },\n                checkout: function checkout() {\n                  return toaster.success(\"checkout\");\n                },\n                key: product.node.id.toString(),\n                product: product.node,\n                client: \"Marketplace\",\n                atcDisabled: atcDisabled\n              });\n            }));\n          }), selectedChannel === 'zinc' && zincResults.length ? zincResults.map(function (product) {\n            return React.createElement(AmzProduct, {\n              product: product,\n              addVariantToCart: function addVariantToCart(a) {\n                return toaster.success(a);\n              },\n              atcDisabled: atcDisabled,\n              addZincItem: function addZincItem(a, b, c, d, e) {\n                return _addZincItem(a, b, c, d, e);\n              }\n            });\n          }) : React.createElement(Pane, {\n            paddingX: \"1em\",\n            paddingBottom: \"1em\"\n          }, React.createElement(Pane, {\n            background: \"tint2\",\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            flexDirection: \"column\",\n            borderRadius: 3\n          }, React.createElement(Heading, {\n            margin: \"1em\",\n            size: 600\n          }, \"No items found\"))));\n        }\n\n        return React.createElement(Pane, {\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          width: \"100%\",\n          height: \"200px\"\n        }, React.createElement(Link, {\n          href: \"/settings\"\n        }, React.createElement(\"a\", null, React.createElement(TextButton, {\n          intent: \"primary\",\n          height: 30,\n          fontSize: 16\n        }, \"Apply for Beta Access\"))));\n      })));\n    }\n  }]);\n\n  return Find;\n}(Component);\n\n_defineProperty(Find, \"propTypes\", {\n  headerSize: PropTypes.number,\n  atcDisabled: PropTypes.bool,\n  addVariant: PropTypes.func\n});\n\nexport { Find as default };","map":{"version":3,"sources":["/Users/junaid/openship/components/find/Find.js"],"names":["React","Component","Link","gql","Pane","Heading","Text","SearchInput","Icon","TextInput","IconButton","Spinner","TagInput","toaster","Tablist","Tab","Avatar","PropTypes","Query","Product","AmzProduct","User","Pagination","TextButton","CardStyle","front","prodFront","getItems","getItemGroup","sortOptions","label","value","option","name","options","update","selected","map","a","index","Find","sort","searchBar","searchEntry","limit","pageNum","min","max","price","priceCurrency","itemLocationCountry","include","exclude","selectedChannel","zincResults","token","console","log","fetch","process","env","NODE_ENV","then","res","json","setState","error","props","headerSize","atcDisabled","addMPItem","addZincItem","state","me","data","buyer","status","e","target","key","zincSearch","zincToken","search","loading","item","length","products","edges","product","b","success","node","id","toString","c","d","number","bool","addVariant","func"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Link from 'next/link';\nimport { gql } from 'apollo-boost';\nimport {\n  Pane,\n  Heading,\n  Text,\n  SearchInput,\n  Icon,\n  TextInput,\n  IconButton,\n  Spinner,\n  TagInput,\n  toaster,\n  Tablist,\n  Tab,\n  Avatar,\n} from 'evergreen-ui';\nimport PropTypes from 'prop-types';\nimport { Query } from 'react-apollo';\nimport Product from './findListItem/Product';\nimport AmzProduct from './findListItem/AmzProduct';\nimport User from '../user/User';\nimport Pagination from '../common/Pagination';\nimport TextButton from '../common/Button';\nimport { CardStyle } from '../common/DefaultStyles';\nimport { front, prodFront } from '../../config';\n\nconst getItems = gql`\n  query getItems(\n    $search: String\n    $limit: Int\n    $sort: String\n    $pageNum: Int\n    $exclude: Json\n    $include: Json\n    $priceCurrency: String\n    $price: String\n    $itemLocationCountry: String\n  ) {\n    getItems(\n      search: $search\n      limit: $limit\n      sort: $sort\n      pageNum: $pageNum\n      exclude: $exclude\n      include: $include\n      priceCurrency: $priceCurrency\n      price: $price\n      itemLocationCountry: $itemLocationCountry\n    ) {\n      item\n    }\n  }\n`;\n\nexport const getItemGroup = gql`\n  query getItemGroup($itemID: String) {\n    getItemGroup(itemID: $itemID) {\n      item\n    }\n  }\n`;\n\nconst sortOptions = [\n  {\n    label: 'Lowest Price',\n    value: 'price',\n  },\n  {\n    label: 'Highest Price',\n    value: '-price',\n  },\n  {\n    label: 'Best Match',\n    value: 'match',\n  },\n];\n\nconst option = (name, options, update, selected) => (\n  <Pane marginBottom={10} marginRight={10}>\n    <Heading size={500} fontSize=\"12px\" fontWeight={500} marginBottom={2}>\n      {name}\n    </Heading>\n    <Tablist>\n      {options.map((a, index) => (\n        <Tab\n          key={a}\n          id={a}\n          marginLeft={0}\n          height=\"20px\"\n          fontSize=\"10px\"\n          marginBottom={3}\n          letterSpacing=\"0.3px\"\n          fontWeight={400}\n          textTransform=\"uppercase\"\n          onSelect={() => update(a)}\n          isSelected={a === selected}\n          aria-controls={`panel-${a}`}\n        >\n          {a}\n        </Tab>\n      ))}\n    </Tablist>\n  </Pane>\n);\n\nexport default class Find extends Component {\n  static propTypes = {\n    headerSize: PropTypes.number,\n    atcDisabled: PropTypes.bool,\n    addVariant: PropTypes.func,\n  };\n\n  state = {\n    sort: {\n      label: 'Lowest Price',\n      value: 'price',\n    },\n    searchBar: '',\n    searchEntry: null,\n    limit: 10,\n    pageNum: 0,\n    min: '',\n    max: '',\n    price: null,\n    priceCurrency: 'USD',\n    itemLocationCountry: 'US',\n    include: [],\n    exclude: [],\n    selectedChannel: 'zinc',\n    zincResults: [],\n  };\n\n  zincSearch = (searchEntry, token) => {\n    console.log('called');\n    fetch(\n      `${\n        process.env.NODE_ENV === 'development' ? front : prodFront\n      }/api/zinc/search?query=${searchEntry}&token=${token}`\n    )\n      .then(res => res.json())\n      .then(json => this.setState({ zincResults: json }))\n      .catch(error => console.log('Error: ', error));\n  };\n\n  render() {\n    const { headerSize, atcDisabled, addMPItem, addZincItem } = this.props;\n    const {\n      pageNum,\n      searchBar,\n      sort,\n      limit,\n      itemLocationCountry,\n      selectedChannel,\n      min,\n      max,\n      include,\n      exclude,\n      searchEntry,\n      priceCurrency,\n      price,\n      zincResults,\n    } = this.state;\n    return (\n      <>\n        <Pane display=\"flex\" paddingTop={16} paddingBottom={16}>\n          <Pane flex={1} alignItems=\"center\" display=\"flex\">\n            <Heading size={headerSize || 700}>Marketplace</Heading>\n          </Pane>\n        </Pane>\n        <Pane {...CardStyle} background=\"white\">\n          <User>\n            {({ data: { me } }) => {\n              if (!me) return null;\n              if (me.buyer && me.buyer.status) {\n                return (\n                  <>\n                    <Pane\n                      display=\"flex\"\n                      paddingX=\"1em\"\n                      paddingY=\"1em\"\n                      flexWrap=\"wrap\"\n                    >\n                      <Pagination\n                        leftDisabled={pageNum === 0}\n                        onLeft={() =>\n                          this.setState(state => ({\n                            pageNum: state.pageNum - 1,\n                          }))\n                        }\n                        onRight={() =>\n                          this.setState(state => ({\n                            pageNum: state.pageNum + 1,\n                          }))\n                        }\n                      />\n                      <Pane flex={1}>\n                        <SearchInput\n                          placeholder=\"Search\"\n                          boxShadow=\"none\"\n                          width=\"100%\"\n                          height={36}\n                          value={searchBar}\n                          onChange={e =>\n                            this.setState({\n                              searchBar: e.target.value,\n                              pageNum: 0,\n                            })\n                          }\n                          onKeyPress={e => {\n                            if (e.key === 'Enter') {\n                              this.setState(state => ({\n                                searchEntry: state.searchBar,\n                              }));\n                              if (selectedChannel === 'zinc') {\n                                this.zincSearch(searchBar, me.zincToken);\n                              }\n                            }\n                          }}\n                        />\n                      </Pane>\n                    </Pane>\n\n                    <Pane\n                      display=\"flex\"\n                      flexWrap=\"wrap\"\n                      background=\"#f5f5f5\"\n                      paddingY=\".7em\"\n                      paddingX=\"1em\"\n                    >\n                      {option(\n                        'Channel',\n                        ['zinc', 'marketplace'],\n                        a => this.setState({ selectedChannel: a }),\n                        selectedChannel\n                      )}\n                      {option(\n                        'Location',\n                        ['US', 'CN', 'All'],\n                        a => this.setState({ itemLocationCountry: a }),\n                        itemLocationCountry\n                      )}\n                      {option(\n                        'Items per page',\n                        [10, 50, 100],\n                        a => this.setState({ limit: a }),\n                        limit\n                      )}\n                    </Pane>\n                    {searchEntry && selectedChannel === 'marketplace' && (\n                      <Query\n                        query={getItems}\n                        variables={{\n                          search: searchEntry,\n                          limit,\n                          sort: sort.value,\n                          pageNum,\n                          exclude,\n                          include,\n                          priceCurrency,\n                          price,\n                          itemLocationCountry,\n                        }}\n                      >\n                        {({ data, error, loading }) => {\n                          if (loading)\n                            return (\n                              <Pane\n                                display=\"flex\"\n                                alignItems=\"center\"\n                                justifyContent=\"center\"\n                                height=\"100vh\"\n                              >\n                                <Spinner size={80} />\n                              </Pane>\n                            );\n                          if (\n                            error ||\n                            !data.getItems.item ||\n                            data.getItems.item.length < 1\n                          )\n                            return (\n                              <Pane paddingX=\"1em\" paddingBottom=\"1em\">\n                                <Pane\n                                  background=\"tint2\"\n                                  display=\"flex\"\n                                  justifyContent=\"center\"\n                                  alignItems=\"center\"\n                                  flexDirection=\"column\"\n                                  borderRadius={3}\n                                >\n                                  <Heading margin=\"1em\" size={600}>\n                                    No items found.\n                                  </Heading>\n                                </Pane>\n                              </Pane>\n                            );\n                          return (\n                            <>\n                              {data.getItems.item.data.products.edges.map(\n                                product => (\n                                  <Product\n                                    addVariantToCart={(a, b) => addMPItem(a, b)}\n                                    checkout={() => toaster.success(`checkout`)}\n                                    key={product.node.id.toString()}\n                                    product={product.node}\n                                    client=\"Marketplace\"\n                                    atcDisabled={atcDisabled}\n                                  />\n                                )\n                              )}\n                            </>\n                          );\n                        }}\n                      </Query>\n                    )}\n                    {selectedChannel === 'zinc' && zincResults.length ? (\n                      zincResults.map(product => (\n                        <AmzProduct\n                          product={product}\n                          addVariantToCart={a => toaster.success(a)}\n                          atcDisabled={atcDisabled}\n                          addZincItem={(a, b, c, d, e) =>\n                            addZincItem(a, b, c, d, e)\n                          }\n                        />\n                      ))\n                    ) : (\n                      <Pane paddingX=\"1em\" paddingBottom=\"1em\">\n                        <Pane\n                          background=\"tint2\"\n                          display=\"flex\"\n                          justifyContent=\"center\"\n                          alignItems=\"center\"\n                          flexDirection=\"column\"\n                          borderRadius={3}\n                        >\n                          <Heading margin=\"1em\" size={600}>\n                            No items found\n                          </Heading>\n                        </Pane>\n                      </Pane>\n                    )}\n                  </>\n                );\n              }\n              return (\n                <Pane\n                  display=\"flex\"\n                  alignItems=\"center\"\n                  justifyContent=\"center\"\n                  width=\"100%\"\n                  height=\"200px\"\n                >\n                  <Link href=\"/settings\">\n                    <a>\n                      <TextButton intent=\"primary\" height={30} fontSize={16}>\n                        Apply for Beta Access\n                      </TextButton>\n                    </a>\n                  </Link>\n                </Pane>\n              );\n            }}\n          </User>\n        </Pane>\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}