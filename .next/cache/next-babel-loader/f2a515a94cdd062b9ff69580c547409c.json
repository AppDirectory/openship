{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query shopOrders(\\n    $domain: String!\\n    $first: Int\\n    $after: String\\n    $before: String\\n    $last: Int\\n    $query: String\\n  ) {\\n    shopOrders(\\n      domain: $domain\\n      first: $first\\n      after: $after\\n      before: $before\\n      last: $last\\n      query: $query\\n    ) {\\n      pageInfo\\n      edges\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport { gql } from 'apollo-boost';\nimport Link from 'next/link';\nimport { Pane, Heading, SearchInput, Spinner, IconButton, Icon } from 'evergreen-ui';\nimport { Query } from 'react-apollo';\nimport ShopSelect from '../../common/ShopSelect';\nimport OrderListItem from '../../common/orderListItem/OrderListItem';\nimport Pagination from '../../common/Pagination';\nimport Button from '../../common/Button';\nimport Reshipment from '../../common/Reshipment';\nimport { CardStyle } from '../../common/DefaultStyles';\nexport var shopOrders = gql(_templateObject());\nexport default function CompletedOrderList(_ref) {\n  var shops = _ref.shops;\n\n  var _useState = useState(shops.length && shops[0].domain.split('.')[0]),\n      _useState2 = _slicedToArray(_useState, 2),\n      client = _useState2[0],\n      setClient = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      afterCursor = _useState4[0],\n      setAfterCursor = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      beforeCursor = _useState6[0],\n      setBeforeCursor = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      query = _useState8[0],\n      setQuery = _useState8[1];\n\n  var _useState9 = useState(10),\n      _useState10 = _slicedToArray(_useState9, 2),\n      first = _useState10[0],\n      setFirst = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      last = _useState12[0],\n      setLast = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      isShown = _useState14[0],\n      setIsShown = _useState14[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      selectedOrder = _useState16[0],\n      setSelectedOrder = _useState16[1];\n\n  function updateClient(arg) {\n    setClient(arg);\n    setAfterCursor(null);\n    setBeforeCursor(null);\n    setFirst(10);\n    setLast(null);\n  }\n\n  function onPrevious(arg) {\n    setAfterCursor(null);\n    setBeforeCursor(arg);\n    setFirst(null);\n    setLast(10);\n  }\n\n  function onNext(arg) {\n    setAfterCursor(arg);\n    setBeforeCursor(null);\n    setFirst(10);\n    setLast(null);\n  }\n\n  function updateDialog(arg) {\n    setIsShown(true);\n    setSelectedOrder(arg);\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(Pane, {\n    display: \"flex\",\n    paddingTop: 16,\n    paddingBottom: 16\n  }, React.createElement(Pane, {\n    flex: 1,\n    alignItems: \"center\",\n    display: \"flex\"\n  }, React.createElement(Heading, {\n    size: 700\n  }, \"Completed Orders\"))), client ? React.createElement(Pane, CardStyle, React.createElement(Pane, {\n    display: \"block\",\n    padding: \"1em\"\n  }, React.createElement(Pane, {\n    display: \"flex\"\n  }, React.createElement(SearchInput, {\n    placeholder: \"Search\",\n    width: \"100%\",\n    height: 36,\n    value: query,\n    onChange: function onChange(e) {\n      return setQuery(e.target.value);\n    }\n  })), React.createElement(Pane, null, React.createElement(ShopSelect, {\n    client: client,\n    shops: shops,\n    updateClient: updateClient\n  }))), React.createElement(Query, {\n    query: shopOrders,\n    variables: {\n      domain: \"\".concat(client, \".myshopify.com\"),\n      after: afterCursor,\n      before: beforeCursor,\n      first: first,\n      last: last,\n      query: query\n    }\n  }, function (_ref2) {\n    var data = _ref2.data,\n        error = _ref2.error,\n        loading = _ref2.loading;\n    if (loading) return React.createElement(Pane, {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      height: \"100vh\"\n    }, React.createElement(Spinner, {\n      size: 80\n    }));\n    if (error || !data.shopOrders) return React.createElement(\"div\", null, error);\n    return React.createElement(React.Fragment, null, React.createElement(Pane, {\n      width: \"100%\"\n    }, selectedOrder && React.createElement(Reshipment, {\n      isShown: isShown,\n      onCloseComplete: function onCloseComplete() {\n        return setIsShown(false);\n      },\n      order: data.shopOrders.edges.filter(function (order) {\n        return order.node.id.split('/').pop() === selectedOrder;\n      })[0].node,\n      shop: client\n    }), data.shopOrders.edges.map(function (order, index) {\n      return React.createElement(Pane, {\n        borderTop: \"0.1rem solid #dfe3e8\"\n      }, React.createElement(OrderListItem, {\n        key: index,\n        disabled: true,\n        client: client,\n        orderName: order.node.name,\n        first_name: order.node.shippingAddress.name.split(' ')[0],\n        last_name: order.node.shippingAddress.name.split(' ').pop(),\n        streetAddress1: order.node.shippingAddress.address1,\n        streetAddress2: order.node.shippingAddress.address2,\n        city: order.node.shippingAddress.city,\n        state: order.node.shippingAddress.province,\n        zip: order.node.shippingAddress.zip,\n        shopName: client,\n        lineItems: order.node.lineItems.edges,\n        createAt: order.node.processedAt,\n        note: order.node.note && order.node.note // errorText={order.node.note && order.node.note}\n        // processText={order.node.note && order.node.note}\n        ,\n        orderId: order.node.id.split('/').pop(),\n        buttons: React.createElement(React.Fragment, null, React.createElement(Pane, {\n          height: 20,\n          marginLeft: 6\n        }, React.createElement(Button, {\n          background: \"#F9F9FB\",\n          borderRadius: 3,\n          marginRight: 5,\n          onClick: function onClick() {\n            return updateDialog(order.node.id.split('/').pop());\n          }\n        }, React.createElement(Heading, {\n          size: 100,\n          fontWeight: 700,\n          color: \"#234361\",\n          marginRight: 4\n        }, \"RESHIP\"), React.createElement(Icon, {\n          color: \"#234361\",\n          icon: \"social-media\",\n          size: 12\n        }))), React.createElement(Link, {\n          href: {\n            pathname: '/completed',\n            query: {\n              order: order.node.name,\n              email: order.node.email,\n              name: order.node.name,\n              processedAt: Intl.DateTimeFormat('en-US').format(Date.parse(order.node.processedAt)),\n              shippingAddress: _JSON$stringify(order.node.shippingAddress),\n              totalRecievedSet: order.totalPrice,\n              lineItems: _JSON$stringify(order.node.lineItems),\n              client: client,\n              note: order.node.note && order.node.note,\n              fulfillments: _JSON$stringify(order.node.fulfillments)\n            }\n          },\n          as: \"/order?store=\".concat(client, \"&name=\").concat(order.node.name)\n        }, React.createElement(IconButton, {\n          height: 20,\n          appearance: \"minimal\",\n          icon: \"arrow-right\",\n          iconSize: 15,\n          pointerEvents: \"visible\",\n          marginRight: 2,\n          onClick: function onClick(e) {\n            return e.stopPropagation();\n          }\n        })))\n      }));\n    })));\n  })) : React.createElement(Pane, {\n    background: \"white\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    flexDirection: \"column\",\n    borderRadius: 3\n  }, React.createElement(Heading, {\n    margin: \"1em\",\n    size: 600\n  }, \"Your orders will appear here after you add a shop.\")));\n}","map":null,"metadata":{},"sourceType":"module"}