{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query getItemGroup($itemID: String) {\\n    getItemGroup(itemID: $itemID) {\\n      item\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport Link from 'next/link';\nimport { gql } from 'apollo-boost';\nimport { useQuery } from '@apollo/react-hooks';\nimport { Box, Button, InputGroup, InputLeftElement, Input, Icon, Heading, useToast } from '@chakra-ui/core';\nimport { CURRENT_USER_QUERY } from '../user/User';\nimport Pagination from '../common/Pagination';\nimport { CardStyle } from '../common/DefaultStyles';\nimport MarketplaceSearch from './MarketplaceSearch';\nimport ZincSearch from './ZincSearch';\nimport ShopifySearch from './ShopifySearch';\nimport { CHANNELS_QUERY, channelsQueryVars } from '../layout/Page';\nexport var getItemGroup = gql(_templateObject());\nvar sortOptions = [{\n  label: 'Lowest Price',\n  value: 'price'\n}, {\n  label: 'Highest Price',\n  value: '-price'\n}, {\n  label: 'Best Match',\n  value: 'match'\n}];\nexport var option = function option(name, options, update, selected) {\n  return __jsx(Box, {\n    marginBottom: 2,\n    marginRight: 5\n  }, __jsx(Heading, {\n    fontSize: \"sm\",\n    color: \"text\",\n    fontWeight: 500,\n    marginBottom: 0\n  }, name), __jsx(Box, {\n    display: \"flex\"\n  }, options.map(function (a, index) {\n    return __jsx(Box, {\n      id: a,\n      key: index,\n      p: 1,\n      mr: 2,\n      mt: 2,\n      borderRadius: 3,\n      bg: a === selected ? '#e2e9f2' : 'transparent',\n      onClick: function onClick() {\n        return update(a);\n      },\n      cursor: \"pointer\"\n    }, __jsx(Heading, {\n      fontSize: \"xs\",\n      fontWeight: 500,\n      px: 1,\n      color: a === selected ? '#1070ca' : '#425a70',\n      letterSpacing: \"wide\",\n      textTransform: \"uppercase\"\n    }, a));\n  })));\n};\n\nvar Find = function Find(_ref) {\n  var headerSize = _ref.headerSize,\n      atcDisabled = _ref.atcDisabled,\n      addMPItem = _ref.addMPItem,\n      addCustomItem = _ref.addCustomItem,\n      addZincItem = _ref.addZincItem;\n\n  var _useState = useState('price'),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  var _useState2 = useState(''),\n      searchBar = _useState2[0],\n      setSearchBar = _useState2[1];\n\n  var _useState3 = useState(''),\n      searchEntry = _useState3[0],\n      setSearchEntry = _useState3[1];\n\n  var _useState4 = useState(10),\n      limit = _useState4[0],\n      setLimit = _useState4[1];\n\n  var _useState5 = useState(0),\n      pageNum = _useState5[0],\n      setPageNum = _useState5[1];\n\n  var _useState6 = useState(''),\n      min = _useState6[0],\n      setMin = _useState6[1];\n\n  var _useState7 = useState(''),\n      max = _useState7[0],\n      setMax = _useState7[1];\n\n  var _useState8 = useState(null),\n      price = _useState8[0],\n      setPrice = _useState8[1];\n\n  var _useState9 = useState('USD'),\n      priceCurrency = _useState9[0],\n      setPriceCurrency = _useState9[1];\n\n  var _useState10 = useState('US'),\n      itemLocationCountry = _useState10[0],\n      setItemLocationCountry = _useState10[1];\n\n  var _useState11 = useState([]),\n      include = _useState11[0],\n      setInclude = _useState11[1];\n\n  var _useState12 = useState([]),\n      exclude = _useState12[0],\n      setExclude = _useState12[1];\n\n  var _useState13 = useState('Marketplace'),\n      selectedChannel = _useState13[0],\n      setSelectedChannel = _useState13[1];\n\n  var _useQuery = useQuery(CURRENT_USER_QUERY),\n      me = _useQuery.data.me;\n\n  var allChannels = useQuery(CHANNELS_QUERY, {\n    variables: channelsQueryVars\n  });\n  var data = allChannels.data,\n      channelsError = allChannels.error,\n      channelsLoading = allChannels.loading;\n  var toast = useToast();\n  return __jsx(React.Fragment, null, __jsx(Box, {\n    display: \"flex\",\n    py: 4\n  }, __jsx(Box, {\n    flex: 1,\n    alignItems: \"center\",\n    display: \"flex\"\n  }, __jsx(Heading, {\n    fontSize: \"2xl\",\n    color: \"text\",\n    fontWeight: 500\n  }, \"Marketplace\"))), __jsx(Box, _extends({}, CardStyle, {\n    background: \"white\"\n  }), function () {\n    if (!me) return null;\n\n    if (me.buyer && me.buyer.status) {\n      return __jsx(React.Fragment, null, __jsx(Box, {\n        display: \"flex\",\n        paddingX: \"1em\",\n        paddingY: \"1em\",\n        flexWrap: \"wrap\"\n      }, __jsx(Pagination, {\n        leftDisabled: pageNum === 0,\n        onLeft: function onLeft() {\n          return setPageNum(pageNum - 1);\n        },\n        onRight: function onRight() {\n          return setPageNum(pageNum + 1);\n        }\n      }), __jsx(Box, {\n        flex: 1\n      }, __jsx(InputGroup, {\n        width: \"100%\",\n        borderColor: \"gray.300\"\n      }, __jsx(InputLeftElement, {\n        children: __jsx(Icon, {\n          name: \"search\",\n          color: \"gray.300\"\n        })\n      }), __jsx(Input, {\n        value: searchBar,\n        onChange: function onChange(e) {\n          setSearchBar(e.target.value);\n          setPageNum(0);\n        },\n        onKeyPress: function onKeyPress(e) {\n          if (e.key === 'Enter') {\n            setSearchEntry(searchBar);\n          }\n        },\n        placeholder: \"Search\"\n      })))), function () {\n        if (channelsError || !data || !data.channels) return null;\n        return __jsx(React.Fragment, null, __jsx(Box, {\n          display: \"flex\",\n          flexWrap: \"wrap\",\n          background: \"#f5f5f5\",\n          paddingY: \".7em\",\n          paddingX: \"1em\"\n        }, option('Channel', data.channels.map(function (a) {\n          return a.name;\n        }), function (a) {\n          return setSelectedChannel(a);\n        }, selectedChannel), option('Location', ['US', 'CN', 'All'], function (a) {\n          return setItemLocationCountry(a);\n        }, itemLocationCountry), option('Items per page', [10, 50, 100], function (a) {\n          return setLimit(a);\n        }, limit)), searchEntry && data.channels.filter(function (order) {\n          return order.name === selectedChannel;\n        })[0].type === 'MARKETPLACE' && __jsx(MarketplaceSearch, {\n          search: searchEntry,\n          limit: limit,\n          sort: value,\n          pageNum: pageNum,\n          exclude: exclude,\n          include: include,\n          priceCurrency: priceCurrency,\n          price: price,\n          itemLocationCountry: itemLocationCountry,\n          atcDisabled: atcDisabled,\n          addMPItem: addMPItem\n        }), data.channels.filter(function (order) {\n          return order.name === selectedChannel;\n        })[0].type === 'ZINC' && __jsx(ZincSearch, {\n          addZincItem: addZincItem,\n          atcDisabled: atcDisabled,\n          searchEntry: searchEntry,\n          token: data.channels.filter(function (c) {\n            return c.type === 'ZINC';\n          })[0].settings.key\n        }), data.channels.filter(function (order) {\n          return order.name === selectedChannel;\n        })[0].type === 'SHOPIFY' && __jsx(ShopifySearch, {\n          addVariantToCart: function addVariantToCart(a, b) {\n            return addCustomItem(a, b);\n          },\n          checkout: function checkout() {\n            return toast({\n              position: 'top-right',\n              title: \"Checkout\",\n              status: 'success',\n              duration: 2000,\n              isClosable: true\n            });\n          },\n          client: \"Marketplace\",\n          atcDisabled: atcDisabled,\n          searchEntry: searchEntry\n        }));\n      }());\n    }\n\n    return __jsx(Box, {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      width: \"100%\",\n      height: \"200px\"\n    }, __jsx(Link, {\n      href: \"/settings\"\n    }, __jsx(\"a\", null, __jsx(Button, {\n      background: \"#DDEBF7\",\n      borderRadius: 3\n    }, __jsx(Heading, {\n      fontSize: \"lg\",\n      fontWeight: 700,\n      color: \"#1070CA\"\n    }, \"APPLY FOR BETA ACCESS\")))));\n  }()));\n};\n\nexport default Find;","map":{"version":3,"sources":["/Users/junaid/openship2/components/find/Find.js"],"names":["React","useState","Link","gql","useQuery","Box","Button","InputGroup","InputLeftElement","Input","Icon","Heading","useToast","CURRENT_USER_QUERY","Pagination","CardStyle","MarketplaceSearch","ZincSearch","ShopifySearch","CHANNELS_QUERY","channelsQueryVars","getItemGroup","sortOptions","label","value","option","name","options","update","selected","map","a","index","Find","headerSize","atcDisabled","addMPItem","addCustomItem","addZincItem","setValue","searchBar","setSearchBar","searchEntry","setSearchEntry","limit","setLimit","pageNum","setPageNum","min","setMin","max","setMax","price","setPrice","priceCurrency","setPriceCurrency","itemLocationCountry","setItemLocationCountry","include","setInclude","exclude","setExclude","selectedChannel","setSelectedChannel","me","data","allChannels","variables","channelsError","error","channelsLoading","loading","toast","buyer","status","e","target","key","channels","filter","order","type","search","sort","c","settings","b","position","title","duration","isClosable"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Link from 'next/link';\nimport { gql } from 'apollo-boost';\nimport { useQuery } from '@apollo/react-hooks';\nimport {\n  Box,\n  Button,\n  InputGroup,\n  InputLeftElement,\n  Input,\n  Icon,\n  Heading,\n  useToast,\n} from '@chakra-ui/core';\nimport { CURRENT_USER_QUERY } from '../user/User';\nimport Pagination from '../common/Pagination';\nimport { CardStyle } from '../common/DefaultStyles';\nimport MarketplaceSearch from './MarketplaceSearch';\nimport ZincSearch from './ZincSearch';\nimport ShopifySearch from './ShopifySearch';\nimport { CHANNELS_QUERY, channelsQueryVars } from '../layout/Page';\n\nexport const getItemGroup = gql`\n  query getItemGroup($itemID: String) {\n    getItemGroup(itemID: $itemID) {\n      item\n    }\n  }\n`;\n\nconst sortOptions = [\n  {\n    label: 'Lowest Price',\n    value: 'price',\n  },\n  {\n    label: 'Highest Price',\n    value: '-price',\n  },\n  {\n    label: 'Best Match',\n    value: 'match',\n  },\n];\n\nexport const option = (name, options, update, selected) => (\n  <Box marginBottom={2} marginRight={5}>\n    <Heading fontSize=\"sm\" color=\"text\" fontWeight={500} marginBottom={0}>\n      {name}\n    </Heading>\n    <Box display=\"flex\">\n      {options.map((a, index) => (\n        <Box\n          id={a}\n          key={index}\n          p={1}\n          mr={2}\n          mt={2}\n          borderRadius={3}\n          bg={a === selected ? '#e2e9f2' : 'transparent'}\n          onClick={() => update(a)}\n          cursor=\"pointer\"\n        >\n          <Heading\n            fontSize=\"xs\"\n            fontWeight={500}\n            px={1}\n            color={a === selected ? '#1070ca' : '#425a70'}\n            letterSpacing=\"wide\"\n            textTransform=\"uppercase\"\n          >\n            {a}\n          </Heading>\n        </Box>\n      ))}\n    </Box>\n  </Box>\n);\n\nconst Find = ({\n  headerSize,\n  atcDisabled,\n  addMPItem,\n  addCustomItem,\n  addZincItem,\n}) => {\n  const [value, setValue] = useState('price');\n  const [searchBar, setSearchBar] = useState('');\n  const [searchEntry, setSearchEntry] = useState('');\n  const [limit, setLimit] = useState(10);\n  const [pageNum, setPageNum] = useState(0);\n  const [min, setMin] = useState('');\n  const [max, setMax] = useState('');\n  const [price, setPrice] = useState(null);\n  const [priceCurrency, setPriceCurrency] = useState('USD');\n  const [itemLocationCountry, setItemLocationCountry] = useState('US');\n  const [include, setInclude] = useState([]);\n  const [exclude, setExclude] = useState([]);\n  const [selectedChannel, setSelectedChannel] = useState('Marketplace');\n\n  const {\n    data: { me },\n  } = useQuery(CURRENT_USER_QUERY);\n\n  const allChannels = useQuery(CHANNELS_QUERY, {\n    variables: channelsQueryVars,\n  });\n\n  const { data, error: channelsError, loading: channelsLoading } = allChannels;\n\n  const toast = useToast();\n\n  return (\n    <>\n      <Box display=\"flex\" py={4}>\n        <Box flex={1} alignItems=\"center\" display=\"flex\">\n          <Heading fontSize=\"2xl\" color=\"text\" fontWeight={500}>\n            Marketplace\n          </Heading>\n        </Box>\n      </Box>\n      <Box {...CardStyle} background=\"white\">\n        {(() => {\n          if (!me) return null;\n          if (me.buyer && me.buyer.status) {\n            return (\n              <>\n                <Box\n                  display=\"flex\"\n                  paddingX=\"1em\"\n                  paddingY=\"1em\"\n                  flexWrap=\"wrap\"\n                >\n                  <Pagination\n                    leftDisabled={pageNum === 0}\n                    onLeft={() => setPageNum(pageNum - 1)}\n                    onRight={() => setPageNum(pageNum + 1)}\n                  />\n                  <Box flex={1}>\n                    <InputGroup width=\"100%\" borderColor=\"gray.300\">\n                      <InputLeftElement\n                        children={<Icon name=\"search\" color=\"gray.300\" />}\n                      />\n                      <Input\n                        value={searchBar}\n                        onChange={e => {\n                          setSearchBar(e.target.value);\n                          setPageNum(0);\n                        }}\n                        onKeyPress={e => {\n                          if (e.key === 'Enter') {\n                            setSearchEntry(searchBar);\n                          }\n                        }}\n                        placeholder=\"Search\"\n                      />\n                    </InputGroup>\n                  </Box>\n                </Box>\n                {(() => {\n                  if (channelsError || !data || !data.channels) return null;\n                  return (\n                    <>\n                      <Box\n                        display=\"flex\"\n                        flexWrap=\"wrap\"\n                        background=\"#f5f5f5\"\n                        paddingY=\".7em\"\n                        paddingX=\"1em\"\n                      >\n                        {option(\n                          'Channel',\n                          data.channels.map(a => a.name),\n                          a => setSelectedChannel(a),\n                          selectedChannel\n                        )}\n                        {option(\n                          'Location',\n                          ['US', 'CN', 'All'],\n                          a => setItemLocationCountry(a),\n                          itemLocationCountry\n                        )}\n                        {option(\n                          'Items per page',\n                          [10, 50, 100],\n                          a => setLimit(a),\n                          limit\n                        )}\n                      </Box>\n                      {searchEntry &&\n                        data.channels.filter(\n                          order => order.name === selectedChannel\n                        )[0].type === 'MARKETPLACE' && (\n                          <MarketplaceSearch\n                            {...{\n                              search: searchEntry,\n                              limit,\n                              sort: value,\n                              pageNum,\n                              exclude,\n                              include,\n                              priceCurrency,\n                              price,\n                              itemLocationCountry,\n                              atcDisabled,\n                              addMPItem,\n                            }}\n                          />\n                        )}\n                      {data.channels.filter(\n                        order => order.name === selectedChannel\n                      )[0].type === 'ZINC' && (\n                        <ZincSearch\n                          addZincItem={addZincItem}\n                          atcDisabled={atcDisabled}\n                          searchEntry={searchEntry}\n                          token={\n                            data.channels.filter(c => c.type === 'ZINC')[0]\n                              .settings.key\n                          }\n                        />\n                      )}\n                      {data.channels.filter(\n                        order => order.name === selectedChannel\n                      )[0].type === 'SHOPIFY' && (\n                        <ShopifySearch\n                          addVariantToCart={(a, b) => addCustomItem(a, b)}\n                          checkout={() =>\n                            toast({\n                              position: 'top-right',\n                              title: `Checkout`,\n                              status: 'success',\n                              duration: 2000,\n                              isClosable: true,\n                            })\n                          }\n                          client=\"Marketplace\"\n                          atcDisabled={atcDisabled}\n                          searchEntry={searchEntry}\n                        />\n                      )}\n                    </>\n                  );\n                })()}\n              </>\n            );\n          }\n          return (\n            <Box\n              display=\"flex\"\n              alignItems=\"center\"\n              justifyContent=\"center\"\n              width=\"100%\"\n              height=\"200px\"\n            >\n              <Link href=\"/settings\">\n                <a>\n                  <Button background=\"#DDEBF7\" borderRadius={3}>\n                    <Heading fontSize=\"lg\" fontWeight={700} color=\"#1070CA\">\n                      APPLY FOR BETA ACCESS\n                    </Heading>\n                  </Button>\n                </a>\n              </Link>\n            </Box>\n          );\n        })()}\n      </Box>\n    </>\n  );\n};\n\nexport default Find;\n"]},"metadata":{},"sourceType":"module"}