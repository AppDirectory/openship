{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport MktProduct from '../MarketplaceSearch/MktProduct';\n\nfunction ShopifySearch(_ref) {\n  var addZincItem = _ref.addZincItem,\n      atcDisabled = _ref.atcDisabled,\n      searchEntry = _ref.searchEntry,\n      token = _ref.token;\n\n  var _useState = useState([]),\n      results = _useState[0],\n      setResults = _useState[1];\n\n  var _useState2 = useState(''),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  useEffect(function () {\n    function findItems() {\n      var query, variables, items;\n      return _regeneratorRuntime.async(function findItems$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              query = \"\\n      query AllOrdersQuery($query: String)\\n      {\\n        products(query: $query first:5) \\n        {\\n          pageInfo {\\n            hasNextPage\\n            hasPreviousPage\\n          }\\n          edges {\\n            node {\\n              id\\n              title\\n              options {\\n                id\\n                name\\n                values\\n              }\\n              variants(first: 250) {\\n                pageInfo {\\n                  hasNextPage\\n                  hasPreviousPage\\n                }\\n                edges {\\n                  node {\\n                    id\\n                    title\\n                    selectedOptions {\\n                      name\\n                      value\\n                    }\\n                    image {\\n                      src\\n                    }\\n                    price\\n                  }\\n                }\\n              }\\n              images(first: 250) {\\n                pageInfo {\\n                  hasNextPage\\n                  hasPreviousPage\\n                }\\n                edges {\\n                  node {\\n                    src\\n                  }\\n                }\\n              }\\n            }\\n          }\\n          }\\n        }\\n      \";\n              variables = {\n                query: searchEntry\n              };\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(fetch(\"https://\".concat(process.env.CUSTOM_SHOP_NAME, \".myshopify.com/api/graphql\"), {\n                method: 'POST',\n                body: JSON.stringify({\n                  query: query,\n                  variables: variables\n                }),\n                headers: {\n                  'Content-Type': 'application/json',\n                  'X-Shopify-Storefront-Access-Token': process.env.CUSTOM_SHOP_ACCESS\n                }\n              }).then(function (res) {\n                return res.json();\n              }).then(function (json) {\n                return setResults(json.data.products.edges);\n              }));\n\n            case 4:\n              items = _context.sent;\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    searchEntry && findItems();\n  }, [searchEntry]);\n  return results.map(function (product) {\n    return __jsx(MktProduct, {\n      addVariantToCart: function addVariantToCart(a, b) {\n        return addCustomItem(a, b);\n      },\n      checkout: function checkout() {\n        return toaster.success(\"checkout\");\n      },\n      key: product.node.id.toString(),\n      product: product.node,\n      client: \"Marketplace\",\n      atcDisabled: atcDisabled\n    });\n  });\n}\n\nexport default ShopifySearch;","map":{"version":3,"sources":["/Users/junaid/openship2/components/find/ShopifySearch/index.js"],"names":["React","useState","useEffect","MktProduct","ShopifySearch","addZincItem","atcDisabled","searchEntry","token","results","setResults","error","setError","findItems","query","variables","fetch","process","env","CUSTOM_SHOP_NAME","method","body","JSON","stringify","headers","CUSTOM_SHOP_ACCESS","then","res","json","data","products","edges","items","map","product","a","b","addCustomItem","toaster","success","node","id","toString"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,UAAP,MAAuB,iCAAvB;;AAEA,SAASC,aAAT,OAAyE;AAAA,MAAhDC,WAAgD,QAAhDA,WAAgD;AAAA,MAAnCC,WAAmC,QAAnCA,WAAmC;AAAA,MAAtBC,WAAsB,QAAtBA,WAAsB;AAAA,MAATC,KAAS,QAATA,KAAS;;AAAA,kBACzCP,QAAQ,CAAC,EAAD,CADiC;AAAA,MAChEQ,OADgE;AAAA,MACvDC,UADuD;;AAAA,mBAE7CT,QAAQ,CAAC,EAAD,CAFqC;AAAA,MAEhEU,KAFgE;AAAA,MAEzDC,QAFyD;;AAIvEV,EAAAA,SAAS,CAAC,YAAM;AACd,aAAeW,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,cAAAA,KADR;AAwDQC,cAAAA,SAxDR,GAwDoB;AAChBD,gBAAAA,KAAK,EAAEP;AADS,eAxDpB;AAAA;AAAA,+CA4DsBS,KAAK,mBACZC,OAAO,CAACC,GAAR,CAAYC,gBADA,iCAEvB;AACEC,gBAAAA,MAAM,EAAE,MADV;AAEEC,gBAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAET,kBAAAA,KAAK,EAALA,KAAF;AAASC,kBAAAA,SAAS,EAATA;AAAT,iBAAf,CAFR;AAGES,gBAAAA,OAAO,EAAE;AACP,kCAAgB,kBADT;AAEP,uDAAqCP,OAAO,CAACC,GAAR,CAAYO;AAF1C;AAHX,eAFuB,CAAL,CAWjBC,IAXiB,CAWZ,UAAAC,GAAG;AAAA,uBAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,eAXS,EAYjBF,IAZiB,CAYZ,UAAAE,IAAI;AAAA,uBAAIlB,UAAU,CAACkB,IAAI,CAACC,IAAL,CAAUC,QAAV,CAAmBC,KAApB,CAAd;AAAA,eAZQ,CA5DtB;;AAAA;AA4DQC,cAAAA,KA5DR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA2EAzB,IAAAA,WAAW,IAAIM,SAAS,EAAxB;AACD,GA7EQ,EA6EN,CAACN,WAAD,CA7EM,CAAT;AA+EA,SAAOE,OAAO,CAACwB,GAAR,CAAY,UAAAC,OAAO;AAAA,WACxB,MAAC,UAAD;AACE,MAAA,gBAAgB,EAAE,0BAACC,CAAD,EAAIC,CAAJ;AAAA,eAAUC,aAAa,CAACF,CAAD,EAAIC,CAAJ,CAAvB;AAAA,OADpB;AAEE,MAAA,QAAQ,EAAE;AAAA,eAAME,OAAO,CAACC,OAAR,YAAN;AAAA,OAFZ;AAGE,MAAA,GAAG,EAAEL,OAAO,CAACM,IAAR,CAAaC,EAAb,CAAgBC,QAAhB,EAHP;AAIE,MAAA,OAAO,EAAER,OAAO,CAACM,IAJnB;AAKE,MAAA,MAAM,EAAC,aALT;AAME,MAAA,WAAW,EAAElC;AANf,MADwB;AAAA,GAAnB,CAAP;AAUD;;AAED,eAAeF,aAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport MktProduct from '../MarketplaceSearch/MktProduct';\n\nfunction ShopifySearch({ addZincItem, atcDisabled, searchEntry, token }) {\n  const [results, setResults] = useState([]);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    async function findItems() {\n      const query = `\n      query AllOrdersQuery($query: String)\n      {\n        products(query: $query first:5) \n        {\n          pageInfo {\n            hasNextPage\n            hasPreviousPage\n          }\n          edges {\n            node {\n              id\n              title\n              options {\n                id\n                name\n                values\n              }\n              variants(first: 250) {\n                pageInfo {\n                  hasNextPage\n                  hasPreviousPage\n                }\n                edges {\n                  node {\n                    id\n                    title\n                    selectedOptions {\n                      name\n                      value\n                    }\n                    image {\n                      src\n                    }\n                    price\n                  }\n                }\n              }\n              images(first: 250) {\n                pageInfo {\n                  hasNextPage\n                  hasPreviousPage\n                }\n                edges {\n                  node {\n                    src\n                  }\n                }\n              }\n            }\n          }\n          }\n        }\n      `;\n\n      const variables = {\n        query: searchEntry,\n      };\n\n      const items = await fetch(\n        `https://${process.env.CUSTOM_SHOP_NAME}.myshopify.com/api/graphql`,\n        {\n          method: 'POST',\n          body: JSON.stringify({ query, variables }),\n          headers: {\n            'Content-Type': 'application/json',\n            'X-Shopify-Storefront-Access-Token': process.env.CUSTOM_SHOP_ACCESS,\n          },\n        }\n      )\n        .then(res => res.json())\n        .then(json => setResults(json.data.products.edges));\n    }\n\n    searchEntry && findItems();\n  }, [searchEntry]);\n\n  return results.map(product => (\n    <MktProduct\n      addVariantToCart={(a, b) => addCustomItem(a, b)}\n      checkout={() => toaster.success(`checkout`)}\n      key={product.node.id.toString()}\n      product={product.node}\n      client=\"Marketplace\"\n      atcDisabled={atcDisabled}\n    />\n  ));\n}\n\nexport default ShopifySearch;\n"]},"metadata":{},"sourceType":"module"}