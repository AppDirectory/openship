{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query getItemGroup($itemID: String) {\\n    getItemGroup(itemID: $itemID) {\\n      item\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport Link from 'next/link';\nimport { gql } from 'apollo-boost';\nimport { useQuery } from '@apollo/react-hooks';\nimport { Box, Button, InputGroup, InputLeftElement, Input, Icon, Heading, Text, useToast } from '@chakra-ui/core';\nimport { CURRENT_USER_QUERY } from '../user/User';\nimport Pagination from '../common/Pagination';\nimport { CardStyle } from '../common/DefaultStyles';\nimport MarketplaceSearch from './MarketplaceSearch';\nimport ZincSearch from './ZincSearch';\nimport ShopifySearch from './ShopifySearch';\nimport { CHANNELS_QUERY, channelsQueryVars } from '../layout/Page';\nexport var getItemGroup = gql(_templateObject());\nvar sortOptions = [{\n  label: 'Lowest Price',\n  value: 'price'\n}, {\n  label: 'Highest Price',\n  value: '-price'\n}, {\n  label: 'Best Match',\n  value: 'match'\n}];\nexport var option = function option(name, options, update, selected) {\n  return __jsx(Box, {\n    marginBottom: 2,\n    marginRight: 5\n  }, __jsx(Heading, {\n    fontSize: \"sm\",\n    color: \"text\",\n    fontWeight: 500,\n    marginBottom: 0\n  }, name), __jsx(Box, {\n    display: \"flex\"\n  }, options.length > 0 ? options.map(function (a, index) {\n    return __jsx(Box, {\n      id: a,\n      key: index,\n      p: 1,\n      mr: 2,\n      mt: 2,\n      borderRadius: 3,\n      bg: a === selected ? '#e2e9f2' : 'transparent',\n      onClick: function onClick() {\n        return update(a);\n      },\n      cursor: \"pointer\"\n    }, __jsx(Heading, {\n      fontSize: \"xs\",\n      fontWeight: 500,\n      px: 1,\n      color: a === selected ? '#1070ca' : '#425a70',\n      letterSpacing: \"wide\",\n      textTransform: \"uppercase\"\n    }, a));\n  }) : __jsx(Text, {\n    mt: 2,\n    fontSize: \"sm\",\n    color: \"text\"\n  }, \"No Channels Added\")));\n};\n\nvar Find = function Find(_ref) {\n  var headerSize = _ref.headerSize,\n      atcDisabled = _ref.atcDisabled,\n      addMPItem = _ref.addMPItem,\n      _addCustomItem = _ref.addCustomItem,\n      addZincItem = _ref.addZincItem;\n  var allChannels = useQuery(CHANNELS_QUERY, {\n    variables: channelsQueryVars\n  });\n  var data = allChannels.data,\n      channelsError = allChannels.error,\n      channelsLoading = allChannels.loading;\n\n  var _useState = useState(data.channels.length ? data.channels[0].name : ''),\n      selectedChannel = _useState[0],\n      setSelectedChannel = _useState[1];\n\n  var _useState2 = useState('price'),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  var _useState3 = useState(''),\n      searchBar = _useState3[0],\n      setSearchBar = _useState3[1];\n\n  var _useState4 = useState(''),\n      searchEntry = _useState4[0],\n      setSearchEntry = _useState4[1];\n\n  var _useState5 = useState(10),\n      limit = _useState5[0],\n      setLimit = _useState5[1];\n\n  var _useState6 = useState(0),\n      pageNum = _useState6[0],\n      setPageNum = _useState6[1];\n\n  var _useState7 = useState(''),\n      min = _useState7[0],\n      setMin = _useState7[1];\n\n  var _useState8 = useState(''),\n      max = _useState8[0],\n      setMax = _useState8[1];\n\n  var _useState9 = useState(null),\n      price = _useState9[0],\n      setPrice = _useState9[1];\n\n  var _useState10 = useState('USD'),\n      priceCurrency = _useState10[0],\n      setPriceCurrency = _useState10[1];\n\n  var _useState11 = useState('US'),\n      itemLocationCountry = _useState11[0],\n      setItemLocationCountry = _useState11[1];\n\n  var _useState12 = useState([]),\n      include = _useState12[0],\n      setInclude = _useState12[1];\n\n  var _useState13 = useState([]),\n      exclude = _useState13[0],\n      setExclude = _useState13[1];\n\n  var _useQuery = useQuery(CURRENT_USER_QUERY),\n      me = _useQuery.data.me;\n\n  var toast = useToast();\n  return __jsx(React.Fragment, null, __jsx(Box, {\n    display: \"flex\",\n    py: 4\n  }, __jsx(Box, {\n    flex: 1,\n    alignItems: \"center\",\n    display: \"flex\"\n  }, __jsx(Heading, {\n    fontSize: \"2xl\",\n    color: \"text\",\n    fontWeight: 500\n  }, \"Marketplace\"))), __jsx(Box, _extends({}, CardStyle, {\n    background: \"white\"\n  }), __jsx(React.Fragment, null, __jsx(Box, {\n    display: \"flex\",\n    paddingX: \"1em\",\n    paddingY: \"1em\",\n    flexWrap: \"wrap\"\n  }, __jsx(Pagination, {\n    leftDisabled: pageNum === 0,\n    onLeft: function onLeft() {\n      return setPageNum(pageNum - 1);\n    },\n    onRight: function onRight() {\n      return setPageNum(pageNum + 1);\n    }\n  }), __jsx(Box, {\n    flex: 1\n  }, __jsx(InputGroup, {\n    width: \"100%\",\n    borderColor: \"gray.300\"\n  }, __jsx(InputLeftElement, {\n    children: __jsx(Icon, {\n      name: \"search\",\n      color: \"gray.300\"\n    })\n  }), __jsx(Input, {\n    value: searchBar,\n    onChange: function onChange(e) {\n      setSearchBar(e.target.value);\n      setPageNum(0);\n    },\n    onKeyPress: function onKeyPress(e) {\n      if (e.key === 'Enter') {\n        setSearchEntry(searchBar);\n      }\n    },\n    placeholder: \"Search\"\n  })))), function () {\n    if (channelsError || !data || !data.channels) return null;\n    return __jsx(React.Fragment, null, __jsx(Box, {\n      display: \"flex\",\n      flexWrap: \"wrap\",\n      background: \"#f5f5f5\",\n      paddingY: \".7em\",\n      paddingX: \"1em\"\n    }, option('Channel', data.channels.map(function (a) {\n      return a.name;\n    }), function (a) {\n      return setSelectedChannel(a);\n    }, selectedChannel), option('Location', ['US', 'CN', 'All'], function (a) {\n      return setItemLocationCountry(a);\n    }, itemLocationCountry), option('Items per page', [10, 50, 100], function (a) {\n      return setLimit(a);\n    }, limit)), searchEntry && data.channels.filter(function (order) {\n      return order.name === selectedChannel;\n    })[0].type === 'MARKETPLACE' && __jsx(MarketplaceSearch, {\n      search: searchEntry,\n      limit: limit,\n      sort: value,\n      pageNum: pageNum,\n      exclude: exclude,\n      include: include,\n      priceCurrency: priceCurrency,\n      price: price,\n      itemLocationCountry: itemLocationCountry,\n      atcDisabled: atcDisabled,\n      addMPItem: addMPItem\n    }), data.channels.length > 0 && data.channels.filter(function (order) {\n      return order.name === selectedChannel;\n    })[0].type === 'ZINC' && __jsx(ZincSearch, {\n      addZincItem: addZincItem,\n      atcDisabled: atcDisabled,\n      searchEntry: searchEntry,\n      token: data.channels.filter(function (c) {\n        return c.type === 'ZINC';\n      })[0].settings.key\n    }), data.channels.length > 0 && data.channels.filter(function (order) {\n      return order.name === selectedChannel;\n    })[0].type === 'SHOPIFY' && __jsx(ShopifySearch, {\n      addCustomItem: function addCustomItem(a, b) {\n        return _addCustomItem(a, b, data.channels.filter(function (order) {\n          return order.name === selectedChannel;\n        })[0].settings.shopURL, data.channels.filter(function (order) {\n          return order.name === selectedChannel;\n        })[0].settings.key);\n      },\n      checkout: function checkout() {\n        return toast({\n          position: 'top-right',\n          title: \"Checkout\",\n          status: 'success',\n          duration: 2000,\n          isClosable: true\n        });\n      },\n      client: \"Marketplace\",\n      atcDisabled: atcDisabled,\n      searchEntry: searchEntry,\n      apiKey: data.channels.filter(function (order) {\n        return order.name === selectedChannel;\n      })[0].settings.key,\n      url: data.channels.filter(function (order) {\n        return order.name === selectedChannel;\n      })[0].settings.shopURL\n    }));\n  }())));\n};\n\nexport default Find;","map":{"version":3,"sources":["/Users/junaid/openship/components/find/Find.js"],"names":["React","useState","Link","gql","useQuery","Box","Button","InputGroup","InputLeftElement","Input","Icon","Heading","Text","useToast","CURRENT_USER_QUERY","Pagination","CardStyle","MarketplaceSearch","ZincSearch","ShopifySearch","CHANNELS_QUERY","channelsQueryVars","getItemGroup","sortOptions","label","value","option","name","options","update","selected","length","map","a","index","Find","headerSize","atcDisabled","addMPItem","addCustomItem","addZincItem","allChannels","variables","data","channelsError","error","channelsLoading","loading","channels","selectedChannel","setSelectedChannel","setValue","searchBar","setSearchBar","searchEntry","setSearchEntry","limit","setLimit","pageNum","setPageNum","min","setMin","max","setMax","price","setPrice","priceCurrency","setPriceCurrency","itemLocationCountry","setItemLocationCountry","include","setInclude","exclude","setExclude","me","toast","e","target","key","filter","order","type","search","sort","c","settings","b","shopURL","position","title","status","duration","isClosable"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Link from 'next/link';\nimport { gql } from 'apollo-boost';\nimport { useQuery } from '@apollo/react-hooks';\nimport {\n  Box,\n  Button,\n  InputGroup,\n  InputLeftElement,\n  Input,\n  Icon,\n  Heading,\n  Text,\n  useToast,\n} from '@chakra-ui/core';\nimport { CURRENT_USER_QUERY } from '../user/User';\nimport Pagination from '../common/Pagination';\nimport { CardStyle } from '../common/DefaultStyles';\nimport MarketplaceSearch from './MarketplaceSearch';\nimport ZincSearch from './ZincSearch';\nimport ShopifySearch from './ShopifySearch';\nimport { CHANNELS_QUERY, channelsQueryVars } from '../layout/Page';\n\nexport const getItemGroup = gql`\n  query getItemGroup($itemID: String) {\n    getItemGroup(itemID: $itemID) {\n      item\n    }\n  }\n`;\n\nconst sortOptions = [\n  {\n    label: 'Lowest Price',\n    value: 'price',\n  },\n  {\n    label: 'Highest Price',\n    value: '-price',\n  },\n  {\n    label: 'Best Match',\n    value: 'match',\n  },\n];\n\nexport const option = (name, options, update, selected) => (\n  <Box marginBottom={2} marginRight={5}>\n    <Heading fontSize=\"sm\" color=\"text\" fontWeight={500} marginBottom={0}>\n      {name}\n    </Heading>\n    <Box display=\"flex\">\n      {options.length > 0 ? (\n        options.map((a, index) => (\n          <Box\n            id={a}\n            key={index}\n            p={1}\n            mr={2}\n            mt={2}\n            borderRadius={3}\n            bg={a === selected ? '#e2e9f2' : 'transparent'}\n            onClick={() => update(a)}\n            cursor=\"pointer\"\n          >\n            <Heading\n              fontSize=\"xs\"\n              fontWeight={500}\n              px={1}\n              color={a === selected ? '#1070ca' : '#425a70'}\n              letterSpacing=\"wide\"\n              textTransform=\"uppercase\"\n            >\n              {a}\n            </Heading>\n          </Box>\n        ))\n      ) : (\n        <Text mt={2} fontSize=\"sm\" color=\"text\">\n          No Channels Added\n        </Text>\n      )}\n    </Box>\n  </Box>\n);\n\nconst Find = ({\n  headerSize,\n  atcDisabled,\n  addMPItem,\n  addCustomItem,\n  addZincItem,\n}) => {\n  const allChannels = useQuery(CHANNELS_QUERY, {\n    variables: channelsQueryVars,\n  });\n\n  const { data, error: channelsError, loading: channelsLoading } = allChannels;\n\n  const [selectedChannel, setSelectedChannel] = useState(\n    data.channels.length ? data.channels[0].name : ''\n  );\n  const [value, setValue] = useState('price');\n  const [searchBar, setSearchBar] = useState('');\n  const [searchEntry, setSearchEntry] = useState('');\n  const [limit, setLimit] = useState(10);\n  const [pageNum, setPageNum] = useState(0);\n  const [min, setMin] = useState('');\n  const [max, setMax] = useState('');\n  const [price, setPrice] = useState(null);\n  const [priceCurrency, setPriceCurrency] = useState('USD');\n  const [itemLocationCountry, setItemLocationCountry] = useState('US');\n  const [include, setInclude] = useState([]);\n  const [exclude, setExclude] = useState([]);\n\n  const {\n    data: { me },\n  } = useQuery(CURRENT_USER_QUERY);\n\n  const toast = useToast();\n\n  return (\n    <>\n      <Box display=\"flex\" py={4}>\n        <Box flex={1} alignItems=\"center\" display=\"flex\">\n          <Heading fontSize=\"2xl\" color=\"text\" fontWeight={500}>\n            Marketplace\n          </Heading>\n        </Box>\n      </Box>\n      <Box {...CardStyle} background=\"white\">\n        {/* {(() => {\n          if (!me) return null;\n          if (me.buyer && me.buyer.status) {\n            return ( */}\n        <>\n          <Box display=\"flex\" paddingX=\"1em\" paddingY=\"1em\" flexWrap=\"wrap\">\n            <Pagination\n              leftDisabled={pageNum === 0}\n              onLeft={() => setPageNum(pageNum - 1)}\n              onRight={() => setPageNum(pageNum + 1)}\n            />\n            <Box flex={1}>\n              <InputGroup width=\"100%\" borderColor=\"gray.300\">\n                <InputLeftElement\n                  children={<Icon name=\"search\" color=\"gray.300\" />}\n                />\n                <Input\n                  value={searchBar}\n                  onChange={e => {\n                    setSearchBar(e.target.value);\n                    setPageNum(0);\n                  }}\n                  onKeyPress={e => {\n                    if (e.key === 'Enter') {\n                      setSearchEntry(searchBar);\n                    }\n                  }}\n                  placeholder=\"Search\"\n                />\n              </InputGroup>\n            </Box>\n          </Box>\n          {(() => {\n            if (channelsError || !data || !data.channels) return null;\n            return (\n              <>\n                <Box\n                  display=\"flex\"\n                  flexWrap=\"wrap\"\n                  background=\"#f5f5f5\"\n                  paddingY=\".7em\"\n                  paddingX=\"1em\"\n                >\n                  {option(\n                    'Channel',\n                    data.channels.map(a => a.name),\n                    a => setSelectedChannel(a),\n                    selectedChannel\n                  )}\n                  {option(\n                    'Location',\n                    ['US', 'CN', 'All'],\n                    a => setItemLocationCountry(a),\n                    itemLocationCountry\n                  )}\n                  {option(\n                    'Items per page',\n                    [10, 50, 100],\n                    a => setLimit(a),\n                    limit\n                  )}\n                </Box>\n                {searchEntry &&\n                  data.channels.filter(\n                    order => order.name === selectedChannel\n                  )[0].type === 'MARKETPLACE' && (\n                    <MarketplaceSearch\n                      {...{\n                        search: searchEntry,\n                        limit,\n                        sort: value,\n                        pageNum,\n                        exclude,\n                        include,\n                        priceCurrency,\n                        price,\n                        itemLocationCountry,\n                        atcDisabled,\n                        addMPItem,\n                      }}\n                    />\n                  )}\n                {data.channels.length > 0 &&\n                  data.channels.filter(\n                    order => order.name === selectedChannel\n                  )[0].type === 'ZINC' && (\n                    <ZincSearch\n                      addZincItem={addZincItem}\n                      atcDisabled={atcDisabled}\n                      searchEntry={searchEntry}\n                      token={\n                        data.channels.filter(c => c.type === 'ZINC')[0].settings\n                          .key\n                      }\n                    />\n                  )}\n                {data.channels.length > 0 &&\n                  data.channels.filter(\n                    order => order.name === selectedChannel\n                  )[0].type === 'SHOPIFY' && (\n                    <ShopifySearch\n                      addCustomItem={(a, b) =>\n                        addCustomItem(\n                          a,\n                          b,\n                          data.channels.filter(\n                            order => order.name === selectedChannel\n                          )[0].settings.shopURL,\n                          data.channels.filter(\n                            order => order.name === selectedChannel\n                          )[0].settings.key\n                        )\n                      }\n                      checkout={() =>\n                        toast({\n                          position: 'top-right',\n                          title: `Checkout`,\n                          status: 'success',\n                          duration: 2000,\n                          isClosable: true,\n                        })\n                      }\n                      client=\"Marketplace\"\n                      atcDisabled={atcDisabled}\n                      searchEntry={searchEntry}\n                      apiKey={\n                        data.channels.filter(\n                          order => order.name === selectedChannel\n                        )[0].settings.key\n                      }\n                      url={\n                        data.channels.filter(\n                          order => order.name === selectedChannel\n                        )[0].settings.shopURL\n                      }\n                    />\n                  )}\n              </>\n            );\n          })()}\n        </>\n        {/* );\n          }\n          return (\n            <Box\n              display=\"flex\"\n              alignItems=\"center\"\n              justifyContent=\"center\"\n              width=\"100%\"\n              height=\"200px\"\n            >\n              <Link href=\"/settings\">\n                <a>\n                  <Button background=\"#DDEBF7\" borderRadius={3}>\n                    <Heading fontSize=\"lg\" fontWeight={700} color=\"#1070CA\">\n                      APPLY FOR BETA ACCESS\n                    </Heading>\n                  </Button>\n                </a>\n              </Link>\n            </Box>\n          );\n        })()} */}\n      </Box>\n    </>\n  );\n};\n\nexport default Find;\n"]},"metadata":{},"sourceType":"module"}