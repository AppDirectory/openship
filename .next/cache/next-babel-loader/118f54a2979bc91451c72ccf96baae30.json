{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport MktProduct from '../MarketplaceSearch/MktProduct';\n\nfunction ShopifySearch({\n  addCustomItem,\n  atcDisabled,\n  searchEntry,\n  token,\n  apiKey,\n  url\n}) {\n  const {\n    0: results,\n    1: setResults\n  } = useState([]);\n  const {\n    0: error,\n    1: setError\n  } = useState('');\n  useEffect(() => {\n    async function findItems() {\n      const query = `\n      query AllProductsQuery($query: String)\n      {\n        products(query: $query first:5) \n        {\n          pageInfo {\n            hasNextPage\n            hasPreviousPage\n          }\n          edges {\n            node {\n              availableForSale\n              id\n              title\n              options {\n                id\n                name\n                values\n              }\n              variants(first: 250) {\n                pageInfo {\n                  hasNextPage\n                  hasPreviousPage\n                }\n                edges {\n                  node {\n                    id\n                    title\n                    selectedOptions {\n                      name\n                      value\n                    }\n                    image {\n                      src\n                    }\n                    price\n                  }\n                }\n              }\n              images(first: 250) {\n                pageInfo {\n                  hasNextPage\n                  hasPreviousPage\n                }\n                edges {\n                  node {\n                    src\n                  }\n                }\n              }\n            }\n          }\n          }\n        }\n      `;\n      const variables = {\n        query: searchEntry\n      };\n      const items = await fetch(`https://${url}.myshopify.com/api/graphql`, {\n        method: 'POST',\n        body: JSON.stringify({\n          query,\n          variables\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n          'X-Shopify-Storefront-Access-Token': apiKey\n        }\n      }).then(res => res.json()) // .then(json => console.log(json));\n      .then(json => setResults(json.data.products.edges));\n    }\n\n    searchEntry && findItems();\n  }, [apiKey, searchEntry, url]);\n  return results.map(product => __jsx(MktProduct, {\n    addVariantToCart: (a, b) => addCustomItem(a, b),\n    checkout: () => toaster.success(`checkout`),\n    key: product.node.id.toString(),\n    product: product.node,\n    client: \"Marketplace\",\n    atcDisabled: atcDisabled // atcDisabled={atcDisabled || !product.node.availableForSale}\n\n  }));\n}\n\nexport default ShopifySearch;","map":null,"metadata":{},"sourceType":"module"}