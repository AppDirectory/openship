{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation updateZincToken($token: String!) {\\n    updateZincToken(token: $token) {\\n      zincToken\\n    }\\n  }\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation updateURL($url: String!) {\\n    updateURL(url: $url) {\\n      url\\n    }\\n  }\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation createCustomer($userInput: Json!) {\\n    createCustomer(userInput: $userInput) {\\n      cardObj\\n    }\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation updateSeller($userInput: Json!) {\\n    updateSeller(userInput: $userInput) {\\n      id\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query($domain: String!) {\\n    shop(domain: $domain) {\\n      name\\n      settings\\n      user {\\n        id\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport { Mutation } from 'react-apollo';\nimport gql from 'graphql-tag';\nimport { Pane, Heading, Text, Badge, Tablist, IconButton, Tab, TextInput, Icon, toaster } from 'evergreen-ui';\nimport sellerOnboarding from './sellerOnboarding';\nimport buyerOnboarding from './buyerOnboarding';\nimport AddCard from './AddCard';\nimport { CardStyle } from '../common/DefaultStyles';\nimport Button from '../common/Button';\nimport useMedia from '../common/useMedia';\nimport User, { CURRENT_USER_QUERY } from '../user/User';\nexport var shopQuery = gql(_templateObject());\nexport var UPDATE_SELLER_MUTATION = gql(_templateObject2());\nvar CREATE_CUSTOMER_MUTATION = gql(_templateObject3());\nvar UPDATE_URL_MUTATION = gql(_templateObject4());\nvar UPDATE_ZINC_MUTATION = gql(_templateObject5());\nexport var shopQueryVars = {\n  skip: 0,\n  first: 10\n};\n\nvar Divider = __jsx(Pane, {\n  flexShrink: 0,\n  height: 2,\n  backgroundColor: \"#E4E7EB\",\n  borderRadius: 1,\n  marginBottom: 12\n});\n\nfunction stepCheck(user) {\n  if (!user.status) {\n    return 0;\n  }\n\n  if (!user.account) {\n    return 1;\n  }\n\n  return 2;\n}\n\nexport default function Shop() {\n  var _useState = useState(0),\n      selectedSetting = _useState[0],\n      setSelectedSetting = _useState[1];\n\n  var _useState2 = useState(0),\n      billSetting = _useState2[0],\n      setBillSetting = _useState2[1];\n\n  var _useState3 = useState(0),\n      developSetting = _useState3[0],\n      setDevelopSetting = _useState3[1];\n\n  var _useState4 = useState(false),\n      addCard = _useState4[0],\n      setAddCard = _useState4[1];\n\n  var _useState5 = useState(''),\n      shopName = _useState5[0],\n      setShopName = _useState5[1];\n\n  var _useState6 = useState(''),\n      reviews = _useState6[0],\n      setReviews = _useState6[1];\n\n  var _useState7 = useState(''),\n      threshold = _useState7[0],\n      setThreshold = _useState7[1];\n\n  var _useState8 = useState(''),\n      URL = _useState8[0],\n      setURL = _useState8[1];\n\n  var _useState9 = useState(''),\n      ZincToken = _useState9[0],\n      setZincToken = _useState9[1];\n\n  var stacked = useMedia('(min-width: 1090px)');\n  return __jsx(User, null, function (_ref) {\n    var me = _ref.data.me;\n    if (!me) return null;\n    return __jsx(React.Fragment, null, __jsx(Pane, {\n      display: \"flex\",\n      paddingTop: 16,\n      paddingBottom: 16\n    }, __jsx(Pane, {\n      flex: 1,\n      alignItems: \"center\",\n      display: \"flex\"\n    }, __jsx(Heading, {\n      size: 700\n    }, \"Settings\"))), __jsx(Pane, {\n      paddingBottom: 12\n    }, __jsx(Pane, {\n      display: \"flex\",\n      alignItems: \"center\"\n    }, __jsx(Heading, {\n      size: 600,\n      color: \"#435567\"\n    }, \"Development\")), __jsx(Text, {\n      size: 400,\n      color: \"muted\"\n    }, \"Manage developmental options\")), Divider, __jsx(Pane, _extends({\n      marginBottom: 15\n    }, stacked && {\n      display: 'flex'\n    }), __jsx(Tablist, {\n      marginBottom: 16,\n      flexBasis: 280,\n      marginRight: 24\n    }, __jsx(Pane, stacked && {\n      display: 'flex',\n      flexDirection: 'column',\n      marginBottom: 5\n    }, ['URL', 'Zinc Token'].map(function (tab, index) {\n      return __jsx(Tab, _extends({\n        key: tab,\n        id: tab,\n        onSelect: function onSelect() {\n          return setDevelopSetting(index);\n        },\n        isSelected: index === developSetting,\n        \"aria-controls\": \"panel-\".concat(tab)\n      }, {\n        borderRadius: '.25rem!important',\n        fontSize: '.925rem!important'\n      }, {\n        paddingX: 10,\n        paddingY: 15,\n        marginBottom: 5,\n        justifyContent: \"space-between\"\n      }), tab);\n    }))), __jsx(Pane, _extends({\n      marginBottom: 35\n    }, CardStyle, {\n      padding: 25,\n      background: \"tint1\",\n      flex: \"1\"\n    }), ['URL', 'Zinc Token'].map(function (tab, index) {\n      return __jsx(Pane, {\n        key: tab,\n        id: \"panel-\".concat(tab),\n        role: \"tabpanel\",\n        \"aria-labelledby\": tab,\n        \"aria-hidden\": index !== developSetting,\n        display: index === developSetting ? 'block' : 'none'\n      }, index === 0 && __jsx(Pane, {\n        display: \"flex\",\n        position: \"relative\",\n        height: 32,\n        width: \"100%\",\n        borderRadius: 5\n      }, __jsx(Pane, {\n        width: 32,\n        height: 32,\n        pointerEvents: \"none\",\n        position: \"absolute\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      }, __jsx(Icon, {\n        icon: \"link\",\n        color: \"#8b949c\",\n        size: 12,\n        zIndex: 3\n      })), __jsx(TextInput // className=\"clean-input\"\n      , {\n        value: URL || me.url,\n        onChange: function onChange(e) {\n          return setURL(e.target.value);\n        },\n        paddingLeft: 32,\n        id: \"shop\",\n        name: \"shop\",\n        width: \"100%\",\n        fontSize: 15,\n        marginBottom: 15,\n        marginRight: 10,\n        placeholder: \"https://www.yourcustomfrontend.com\"\n      }), __jsx(Mutation, {\n        mutation: UPDATE_URL_MUTATION,\n        refetchQueries: [{\n          query: CURRENT_USER_QUERY\n        }]\n      }, function (updateURL, _ref2) {\n        var error = _ref2.error,\n            loading = _ref2.loading;\n        return __jsx(Button, {\n          intent: \"success\",\n          height: 32,\n          fontSize: \"14px\",\n          paddingX: \"14px\",\n          onClick: function _callee() {\n            return _regeneratorRuntime.async(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.next = 2;\n                    return _regeneratorRuntime.awrap(updateURL({\n                      variables: {\n                        url: URL\n                      }\n                    }));\n\n                  case 2:\n                    toaster.notify('URL has been saved');\n\n                  case 3:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            });\n          },\n          disabled: !URL || me.url === URL,\n          isLoading: loading\n        }, \"Save\");\n      })), index === 1 && __jsx(Pane, {\n        display: \"flex\",\n        position: \"relative\",\n        height: 32,\n        width: \"100%\",\n        borderRadius: 5\n      }, __jsx(Pane, {\n        width: 32,\n        height: 32,\n        pointerEvents: \"none\",\n        position: \"absolute\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      }, __jsx(Icon, {\n        icon: \"code\",\n        color: \"#8b949c\",\n        size: 12,\n        zIndex: 3\n      })), __jsx(TextInput // className=\"clean-input\"\n      , {\n        value: ZincToken || me.zincToken,\n        onChange: function onChange(e) {\n          return setZincToken(e.target.value);\n        },\n        paddingLeft: 32,\n        id: \"shop\",\n        name: \"shop\",\n        width: \"100%\",\n        fontSize: 15,\n        marginBottom: 15,\n        marginRight: 10,\n        placeholder: \"000000000000000000000000\"\n      }), __jsx(Mutation, {\n        mutation: UPDATE_ZINC_MUTATION,\n        refetchQueries: [{\n          query: CURRENT_USER_QUERY\n        }]\n      }, function (updateZincToken, _ref3) {\n        var error = _ref3.error,\n            loading = _ref3.loading;\n        return __jsx(Button, {\n          intent: \"success\",\n          height: 32,\n          fontSize: \"14px\",\n          paddingX: \"14px\",\n          onClick: function _callee2() {\n            return _regeneratorRuntime.async(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _context2.next = 2;\n                    return _regeneratorRuntime.awrap(updateZincToken({\n                      variables: {\n                        token: ZincToken\n                      }\n                    }));\n\n                  case 2:\n                    toaster.notify('Token has been saved');\n\n                  case 3:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            });\n          },\n          disabled: !ZincToken || me.zincToken === ZincToken,\n          isLoading: loading\n        }, \"Save\");\n      })));\n    }))), __jsx(Pane, {\n      paddingBottom: 12\n    }, __jsx(Pane, {\n      display: \"flex\",\n      alignItems: \"center\"\n    }, __jsx(Heading, {\n      size: 600,\n      color: \"#435567\"\n    }, \"Marketplace\"), __jsx(Badge, {\n      marginLeft: 8,\n      color: \"blue\",\n      isSolid: true,\n      textTransform: \"none\"\n    }, \"\\u03B2eta\")), __jsx(Text, {\n      size: 400,\n      color: \"muted\"\n    }, \"Manage marketplace buying and selling options\")), Divider, __jsx(Pane, null, __jsx(Pane, _extends({\n      marginBottom: 35\n    }, stacked && {\n      display: 'flex'\n    }), __jsx(Tablist, {\n      marginBottom: 16,\n      flexBasis: 280,\n      marginRight: 24\n    }, __jsx(Pane, stacked && {\n      display: 'flex',\n      flexDirection: 'column'\n    }, ['Buyer', 'Seller'].map(function (tab, index) {\n      return __jsx(Tab, _extends({\n        key: tab,\n        id: tab,\n        onSelect: function onSelect() {\n          return setSelectedSetting(index);\n        },\n        isSelected: index === selectedSetting,\n        \"aria-controls\": \"panel-\".concat(tab)\n      }, {\n        borderRadius: '.25rem!important',\n        fontSize: '.925rem!important'\n      }, {\n        paddingX: 10,\n        paddingY: 15,\n        justifyContent: \"left\",\n        marginBottom: 5\n      }), tab);\n    }))), __jsx(Pane, {\n      background: \"white\",\n      flex: \"1\"\n    }, ['Buyer', 'Seller'].map(function (tab, index) {\n      return __jsx(Pane, {\n        key: tab,\n        id: \"panel-\".concat(tab),\n        role: \"tabpanel\",\n        \"aria-labelledby\": tab,\n        \"aria-hidden\": index !== selectedSetting,\n        display: index === selectedSetting ? 'block' : 'none'\n      }, index === 0 && __jsx(Mutation, {\n        mutation: CREATE_CUSTOMER_MUTATION,\n        refetchQueries: [{\n          query: CURRENT_USER_QUERY\n        }]\n      }, function (createCustomer, _ref4) {\n        var error = _ref4.error,\n            loading = _ref4.loading;\n        return buyerOnboarding({\n          buyerStep: me.buyer ? stepCheck(me.buyer) : 0,\n          requested: me.buyer && me.buyer.questions,\n          shopName: shopName,\n          setShopName: setShopName,\n          reviews: reviews,\n          setReviews: setReviews,\n          threshold: threshold,\n          setThreshold: setThreshold,\n          error: error,\n          loading: loading,\n          createCustomer: createCustomer\n        });\n      }), index === 1 && __jsx(Mutation, {\n        mutation: UPDATE_SELLER_MUTATION,\n        refetchQueries: [{\n          query: CURRENT_USER_QUERY\n        }]\n      }, function (updateSeller, _ref5) {\n        var error = _ref5.error,\n            loading = _ref5.loading;\n        return sellerOnboarding({\n          sellerStep: me.seller ? stepCheck(me.seller) : 0,\n          requested: me.seller && me.seller.questions,\n          id: me.id,\n          shopName: shopName,\n          setShopName: setShopName,\n          reviews: reviews,\n          setReviews: setReviews,\n          threshold: threshold,\n          setThreshold: setThreshold,\n          error: error,\n          loading: loading,\n          updateSeller: updateSeller\n        });\n      }));\n    }))), __jsx(Pane, {\n      paddingBottom: 12\n    }, __jsx(Pane, {\n      display: \"flex\",\n      alignItems: \"center\"\n    }, __jsx(Heading, {\n      size: 600,\n      color: \"#435567\"\n    }, \"Billing\")), __jsx(Text, {\n      size: 400,\n      color: \"muted\"\n    }, \"Manage plans and payment methods\")), Divider, __jsx(Pane, _extends({\n      marginBottom: 15\n    }, stacked && {\n      display: 'flex'\n    }), __jsx(Tablist, {\n      marginBottom: 16,\n      flexBasis: 280,\n      marginRight: 24\n    }, __jsx(Pane, stacked && {\n      display: 'flex',\n      flexDirection: 'column',\n      marginBottom: 5\n    }, ['Payment Methods'].map(function (tab, index) {\n      return __jsx(Tab, _extends({\n        key: tab,\n        id: tab,\n        onSelect: function onSelect() {\n          return setBillSetting(index);\n        },\n        isSelected: index === billSetting,\n        \"aria-controls\": \"panel-\".concat(tab)\n      }, {\n        borderRadius: '.25rem!important',\n        fontSize: '.925rem!important'\n      }, {\n        paddingX: 10,\n        paddingY: 15,\n        marginBottom: 5,\n        justifyContent: \"space-between\"\n      }), tab, index === 0 && __jsx(IconButton, {\n        height: 16,\n        icon: \"plus\",\n        marginLeft: 8,\n        appearance: \"primary\",\n        intent: \"default\",\n        borderRadius: 20,\n        outline: \"none\",\n        onClick: function onClick() {\n          return setAddCard(!addCard);\n        }\n      }));\n    }))), __jsx(Pane, _extends({}, CardStyle, {\n      padding: 25,\n      background: \"tint1\",\n      flex: \"1\"\n    }), ['Payment Methods'].map(function (tab, index) {\n      return __jsx(Pane, {\n        key: tab,\n        id: \"panel-\".concat(tab),\n        role: \"tabpanel\",\n        \"aria-labelledby\": tab,\n        \"aria-hidden\": index !== billSetting,\n        display: index === billSetting ? 'block' : 'none'\n      }, index === 0 && __jsx(React.Fragment, null, addCard && __jsx(Pane, {\n        backgroundColor: \"#f5f6f7\",\n        marginBottom: 15,\n        borderRadius: 5,\n        elevation: 1,\n        transition: \"opacity .15s linear\"\n      }, __jsx(AddCard, null)), me.buyer && me.buyer.account && me.buyer.account.sources ? me.buyer.account.sources.data.map(function (card) {\n        return __jsx(Pane, {\n          backgroundColor: \"#f5f6f7\",\n          borderRadius: 5,\n          padding: 10,\n          display: \"flex\",\n          alignItems: \"center\",\n          elevation: 1\n        }, __jsx(Pane, {\n          width: 30,\n          height: 30,\n          marginX: 8\n        }, __jsx(\"svg\", {\n          version: \"1.1\",\n          xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n          x: \"0px\",\n          y: \"0px\",\n          viewBox: \"0 0 291.791 291.791\",\n          style: {\n            enableBackground: 'new 0 0 291.791 291.791'\n          },\n          xmlSpace: \"preserve\"\n        }, __jsx(\"path\", {\n          style: {\n            fill: '#E2574C'\n          },\n          d: \"M182.298 145.895c0 50.366-40.801 91.176-91.149 91.176S0 196.252 0 145.895s40.811-91.176 91.149-91.176 91.149 40.819 91.149 91.176z\"\n        }), __jsx(\"path\", {\n          style: {\n            fill: '#F4B459'\n          },\n          d: \"M200.616 54.719c-20.442 0-39.261 6.811-54.469 18.181l.073.009c2.991 2.89 6.291 4.924 8.835 8.251l-18.965.301c-2.972 3-5.68 6.264-8.233 9.656H161.3c2.544 3.054 4.896 5.708 7.03 9.081h-46.536c-1.705 2.936-3.282 5.954-4.659 9.09h56.493c1.477 3.127 2.799 5.489 3.921 8.799h-63.76a87.809 87.809 0 0 0-2.535 9.646h68.966c.675 3.155 1.194 6.072 1.55 9.045h-71.884c-.301 3-.456 6.045-.456 9.118h72.859c0 3.228-.228 6.218-.556 9.118h-71.847c.31 3.091.766 6.127 1.368 9.118h68.856a107.579 107.579 0 0 1-2.562 9.008h-63.969c.966 3.118 2.143 6.145 3.428 9.099h56.621c-1.568 3.319-3.346 5.972-5.306 9.081h-46.691a88.709 88.709 0 0 0 6.081 9.154l33.589.501c-2.863 3.437-6.537 5.507-9.884 8.516.182.146-5.352-.018-16.248-.191 16.576 17.105 39.744 27.772 65.446 27.772 50.357 0 91.176-40.82 91.176-91.176s-40.81-91.177-91.175-91.177z\"\n        }))), __jsx(Text, {\n          size: 400\n        }, \"ending in \", card.last4), __jsx(Text, {\n          size: 400,\n          marginLeft: \"auto\",\n          marginRight: 20,\n          color: \"#66788A\"\n        }, card.exp_month, \"/\", card.exp_year), __jsx(Button, {\n          intent: \"none\"\n        }, \"Update\"));\n      }) : __jsx(Pane, {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n        borderRadius: 3\n      }, __jsx(Heading, {\n        margin: \"1em\",\n        size: 600\n      }, \"No Payment Methods Added.\"))));\n    })))));\n  });\n}","map":null,"metadata":{},"sourceType":"module"}