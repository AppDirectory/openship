{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport { Pane, Heading, Text, Avatar, Icon } from 'evergreen-ui';\nimport VariantSelector from './VariantSelector';\nimport Button from '../../common/Button';\n\nvar MktProduct =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MktProduct, _Component);\n\n  function MktProduct(props) {\n    var _this;\n\n    _classCallCheck(this, MktProduct);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MktProduct).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOptionChange\", function (event) {\n      var product = _this.props.product;\n      var target = event.target;\n      var selectedOptions = _this.state.selectedOptions;\n      selectedOptions[target.name] = target.value;\n      var selectedVariant = product.variants.edges.find(function (variant) {\n        return variant.node.selectedOptions.every(function (selectedOption) {\n          return selectedOptions[selectedOption.name] === selectedOption.value;\n        });\n      }).node;\n\n      _this.setState({\n        selectedVariant: selectedVariant,\n        selectedVariantImage: selectedVariant.image.src\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleQuantityChange\", function (event) {\n      _this.setState({\n        selectedVariantQuantity: event.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleQuantityDown\", function () {\n      _this.setState(function (prevState) {\n        return {\n          selectedVariantQuantity: prevState.selectedVariantQuantity - 1 || 1\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleQuantityUp\", function () {\n      _this.setState(function (prevState) {\n        return {\n          selectedVariantQuantity: prevState.selectedVariantQuantity + 1\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"findImage\", function (images, variantId) {\n      var primary = images[0];\n      var image = images.filter(function (a) {\n        return a.variant_ids.includes(variantId);\n      })[0];\n      return (image || primary).src;\n    });\n\n    _this.state = {\n      selectedOptions: {},\n      selectedVariantQuantity: 1\n    };\n    return _this;\n  }\n\n  _createClass(MktProduct, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      var product = this.props.product;\n      product.options.forEach(function (selector) {\n        _this2.setState(function (prevState) {\n          return {\n            selectedOptions: _objectSpread({}, prevState.selectedOptions, _defineProperty({}, selector.name, selector.values[0]))\n          };\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          product = _this$props.product,\n          addVariantToCart = _this$props.addVariantToCart,\n          atcDisabled = _this$props.atcDisabled;\n      var _this$state = this.state,\n          selectedVariantImage = _this$state.selectedVariantImage,\n          selectedVariantQuantity = _this$state.selectedVariantQuantity,\n          selectedVariant = _this$state.selectedVariant;\n      var variantImage = selectedVariantImage || product.images.edges[0].node.src;\n      var variant = selectedVariant || product.variants.edges[0].node;\n      var variantQuantity = selectedVariantQuantity || 1;\n      var variantSelectors = product.options.map(function (option) {\n        return __jsx(VariantSelector, {\n          handleOptionChange: _this3.handleOptionChange,\n          key: option.id.toString(),\n          option: option\n        });\n      });\n      return __jsx(React.Fragment, null, __jsx(Pane, {\n        display: \"flex\",\n        alignItems: \"center\",\n        borderTop: \"0.1rem solid #dfe3e8\"\n      }, __jsx(Pane, {\n        padding: 15\n      }, product.images.edges.length && __jsx(Avatar, {\n        src: variantImage,\n        alt: \"\".concat(product.title, \" product shot\"),\n        borderStyle: \"solid\",\n        borderWidth: \"1px\",\n        borderRadius: 3,\n        borderColor: \"#e8e9ea\",\n        size: 90\n      })), __jsx(Pane, {\n        padding: 15,\n        paddingLeft: 0,\n        marginTop: 3,\n        marginBottom: \"auto\"\n      }, __jsx(Heading, {\n        size: 500\n      }, product.title), __jsx(Heading, {\n        size: 400,\n        marginRight: 10,\n        color: \"green\"\n      }, \"$\", variant.price), __jsx(Pane, {\n        display: \"flex\",\n        marginTop: 3,\n        marginBottom: 7\n      }, variantSelectors), !atcDisabled && __jsx(Pane, {\n        display: \"flex\"\n      }, __jsx(Pane, {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        paddingRight: 5\n      }, __jsx(Pane, {\n        display: \"flex\",\n        paddingRight: 5,\n        height: 20\n      }, __jsx(Pane, {\n        display: \"flex\",\n        alignItems: \"center\",\n        background: \"#f4f4f4\",\n        paddingX: 5,\n        borderRadius: 2,\n        boxShadow: \"0 0 2px rgba(67, 90, 111, 0.3)\"\n      }, __jsx(Icon, {\n        color: \"#425A70\",\n        icon: \"minus\",\n        appearance: \"minimal\",\n        size: 12,\n        cursor: \"pointer\",\n        onClick: this.handleQuantityDown\n      }), __jsx(Text, {\n        size: 300,\n        marginX: 9\n      }, selectedVariantQuantity), __jsx(Icon, {\n        color: \"#425A70\",\n        icon: \"plus\",\n        appearance: \"minimal\",\n        size: 12,\n        cursor: \"pointer\",\n        onClick: this.handleQuantityUp\n      }))), __jsx(Pane, {\n        height: 20\n      }, __jsx(Button, {\n        boxShadow: \"0 0 2px rgba(67, 90, 111, 0.3)\",\n        intent: \"primary\",\n        height: 20,\n        onClick: function onClick() {\n          return addVariantToCart(variant.id, selectedVariantQuantity);\n        },\n        disabled: atcDisabled\n      }, \"Add to Cart\")))))));\n    }\n  }]);\n\n  return MktProduct;\n}(Component);\n\nexport default MktProduct;","map":null,"metadata":{},"sourceType":"module"}