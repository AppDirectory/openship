{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query shopOrders(\\n    $domain: String!\\n    $first: Int\\n    $after: String\\n    $before: String\\n    $last: Int\\n    $query: String\\n  ) {\\n    shopOrders(\\n      domain: $domain\\n      first: $first\\n      after: $after\\n      before: $before\\n      last: $last\\n      query: $query\\n    ) {\\n      pageInfo\\n      edges\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport { gql } from 'apollo-boost';\nimport Link from 'next/link';\nimport { Box, Heading, Spinner, Drawer, DrawerOverlay, DrawerContent, Button, DrawerBody, InputGroup, InputLeftElement, Icon, Input, useDisclosure } from '@chakra-ui/core';\nimport PropTypes from 'prop-types';\nimport { useQuery } from '@apollo/react-hooks';\nimport ShopSelect from '../../common/ShopSelect';\nimport OrderListItem from '../../common/orderListItem/OrderListItem';\nimport Reshipment from '../../common/Reshipment';\nimport { OrderDetailsComp } from '../../common/OrderDetails';\nimport { CardStyle } from '../../common/DefaultStyles';\nexport var SHOP_ORDERS_QUERY = gql(_templateObject());\nexport default function CompletedOrderList(_ref) {\n  var shops = _ref.shops;\n\n  var _useState = useState(shops.length && shops[0].domain.split('.')[0]),\n      client = _useState[0],\n      setClient = _useState[1];\n\n  var _useState2 = useState(null),\n      afterCursor = _useState2[0],\n      setAfterCursor = _useState2[1];\n\n  var _useState3 = useState(null),\n      beforeCursor = _useState3[0],\n      setBeforeCursor = _useState3[1];\n\n  var _useState4 = useState(''),\n      query = _useState4[0],\n      setQuery = _useState4[1];\n\n  var _useState5 = useState(10),\n      first = _useState5[0],\n      setFirst = _useState5[1];\n\n  var _useState6 = useState(null),\n      last = _useState6[0],\n      setLast = _useState6[1];\n\n  var _useState7 = useState(null),\n      selectedOrder = _useState7[0],\n      setSelectedOrder = _useState7[1];\n\n  var _useState8 = useState(null),\n      selectedOrder2 = _useState8[0],\n      setSelectedOrder2 = _useState8[1];\n\n  var _useDisclosure = useDisclosure(),\n      isOpen = _useDisclosure.isOpen,\n      onOpen = _useDisclosure.onOpen,\n      onClose = _useDisclosure.onClose;\n\n  var _useDisclosure2 = useDisclosure(),\n      drawerIsOpen = _useDisclosure2.isOpen,\n      drawerOnOpen = _useDisclosure2.onOpen,\n      drawerOnClose = _useDisclosure2.onClose;\n\n  var _useQuery = useQuery(SHOP_ORDERS_QUERY, {\n    variables: {\n      domain: \"\".concat(client, \".myshopify.com\"),\n      after: afterCursor,\n      before: beforeCursor,\n      first: first,\n      last: last,\n      query: query\n    }\n  }),\n      data = _useQuery.data,\n      error = _useQuery.error,\n      loading = _useQuery.loading;\n\n  function updateClient(arg) {\n    setClient(arg);\n    setAfterCursor(null);\n    setBeforeCursor(null);\n    setFirst(10);\n    setLast(null);\n  }\n\n  function onPrevious(arg) {\n    setAfterCursor(null);\n    setBeforeCursor(arg);\n    setFirst(null);\n    setLast(10);\n  }\n\n  function onNext(arg) {\n    setAfterCursor(arg);\n    setBeforeCursor(null);\n    setFirst(10);\n    setLast(null);\n  }\n\n  function updateDialog(arg) {\n    onOpen();\n    setSelectedOrder(arg);\n  }\n\n  function updateDrawer(arg) {\n    drawerOnOpen();\n    setSelectedOrder2(arg);\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Box, {\n    display: \"flex\",\n    py: 4\n  }, __jsx(Box, {\n    flex: 1,\n    alignItems: \"center\",\n    display: \"flex\"\n  }, __jsx(Heading, {\n    fontSize: \"2xl\",\n    color: \"text\",\n    fontWeight: 500\n  }, \"Completed Orders\"))), selectedOrder2 && __jsx(Drawer, {\n    size: \"md\",\n    isOpen: drawerIsOpen,\n    placement: \"right\",\n    onClose: drawerOnClose\n  }, __jsx(DrawerOverlay, null), __jsx(DrawerContent, null, __jsx(DrawerBody, {\n    bg: \"#f9f9fb\",\n    p: 0\n  }, __jsx(Box, null, __jsx(OrderDetailsComp, _extends({}, data.shopOrders.edges.filter(function (order) {\n    return order.node.id.split('/').pop() === selectedOrder2;\n  })[0].node, {\n    store: client,\n    backgroundColor: \"white\",\n    onOpen: function onOpen() {\n      return updateDialog(selectedOrder2);\n    }\n  })))))), client ? __jsx(Box, CardStyle, __jsx(Box, {\n    display: \"block\",\n    padding: \"1em\"\n  }, __jsx(Box, {\n    display: \"flex\"\n  }, __jsx(InputGroup, {\n    width: \"100%\",\n    borderColor: \"gray.300\"\n  }, __jsx(InputLeftElement, {\n    children: __jsx(Icon, {\n      name: \"search\",\n      color: \"gray.300\"\n    })\n  }), __jsx(Input, {\n    value: query,\n    onChange: function onChange(e) {\n      return setQuery(e.target.value);\n    },\n    type: \"phone\",\n    placeholder: \"Search\"\n  }))), __jsx(Box, null, __jsx(ShopSelect, {\n    client: client,\n    shops: shops,\n    updateClient: updateClient\n  }))), function () {\n    if (loading) return __jsx(Box, {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      height: \"100vh\"\n    }, __jsx(Spinner, {\n      thickness: \"4px\",\n      speed: \"0.65s\",\n      emptyColor: \"gray.200\",\n      color: \"blue.500\",\n      size: \"xl\"\n    }));\n    if (error || !data.shopOrders) return __jsx(\"div\", null, error);\n    return __jsx(React.Fragment, null, __jsx(Box, {\n      width: \"100%\"\n    }, selectedOrder && __jsx(Reshipment, {\n      isOpen: isOpen,\n      onClose: onClose,\n      order: data.shopOrders.edges.filter(function (order) {\n        return order.node.id.split('/').pop() === selectedOrder;\n      }).length > 0 && data.shopOrders.edges.filter(function (order) {\n        return order.node.id.split('/').pop() === selectedOrder;\n      })[0].node,\n      shop: client\n    }), data.shopOrders.edges.map(function (order, index) {\n      return __jsx(Box, {\n        borderTop: \"0.1rem solid #dfe3e8\"\n      }, __jsx(OrderListItem, {\n        key: index,\n        disabled: true,\n        client: client,\n        orderName: order.node.name,\n        first_name: order.node.shippingAddress.name.split(' ')[0],\n        last_name: order.node.shippingAddress.name.split(' ').pop(),\n        streetAddress1: order.node.shippingAddress.address1,\n        streetAddress2: order.node.shippingAddress.address2,\n        city: order.node.shippingAddress.city,\n        state: order.node.shippingAddress.province,\n        zip: order.node.shippingAddress.zip,\n        shopName: client,\n        lineItems: order.node.lineItems.edges,\n        createAt: order.node.processedAt,\n        note: order.node.note && order.node.note,\n        email: order.node.email // errorText={order.node.note && order.node.note}\n        // processText={order.node.note && order.node.note}\n        ,\n        orderId: order.node.id.split('/').pop(),\n        buttons: __jsx(React.Fragment, null, __jsx(Button, {\n          background: \"#DDEBF7\",\n          borderRadius: 3,\n          marginRight: 1,\n          px: 2,\n          height: 5,\n          onClick: function onClick() {\n            return updateDialog(order.node.id.split('/').pop());\n          }\n        }, __jsx(Heading, {\n          fontSize: \"xs\",\n          fontWeight: 700,\n          color: \"#1070CA\",\n          marginRight: 2\n        }, \"RESHIP\"), __jsx(Icon, {\n          size: 3,\n          color: \"#1070CA\",\n          name: \"repeat\"\n        })), __jsx(Link, {\n          href: {\n            pathname: '/completed'\n          },\n          as: \"/order?store=\".concat(client, \"&name=\").concat(order.node.name)\n        }, __jsx(Button, {\n          onClick: function onClick() {\n            return updateDrawer(order.node.id.split('/').pop());\n          },\n          bg: \"transparent\",\n          color: \"#66788a\",\n          \"aria-label\": \"show order\",\n          height: \"1.3rem\",\n          minWidth: \"1.3rem\",\n          px: 0,\n          ml: 1\n        }, __jsx(Icon, {\n          name: \"arrow-forward\",\n          size: \"18px\"\n        }))))\n      }));\n    })));\n  }()) : __jsx(Box, {\n    background: \"white\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    flexDirection: \"column\",\n    borderRadius: 3\n  }, __jsx(Heading, {\n    margin: \"1em\",\n    size: 600\n  }, \"Your orders will appear here after you add a shop.\")));\n}\nCompletedOrderList.propTypes = {\n  shops: PropTypes.string\n};","map":{"version":3,"sources":["/Users/junaid/openship/components/completed/completedOrderList/CompletedOrderList.js"],"names":["React","useState","gql","Link","Box","Heading","Spinner","Drawer","DrawerOverlay","DrawerContent","Button","DrawerBody","InputGroup","InputLeftElement","Icon","Input","useDisclosure","PropTypes","useQuery","ShopSelect","OrderListItem","Reshipment","OrderDetailsComp","CardStyle","SHOP_ORDERS_QUERY","CompletedOrderList","shops","length","domain","split","client","setClient","afterCursor","setAfterCursor","beforeCursor","setBeforeCursor","query","setQuery","first","setFirst","last","setLast","selectedOrder","setSelectedOrder","selectedOrder2","setSelectedOrder2","isOpen","onOpen","onClose","drawerIsOpen","drawerOnOpen","drawerOnClose","variables","after","before","data","error","loading","updateClient","arg","onPrevious","onNext","updateDialog","updateDrawer","shopOrders","edges","filter","order","node","id","pop","e","target","value","map","index","name","shippingAddress","address1","address2","city","province","zip","lineItems","processedAt","note","email","pathname","propTypes","string"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { gql } from 'apollo-boost';\nimport Link from 'next/link';\nimport {\n  Box,\n  Heading,\n  Spinner,\n  Drawer,\n  DrawerOverlay,\n  DrawerContent,\n  Button,\n  DrawerBody,\n  InputGroup,\n  InputLeftElement,\n  Icon,\n  Input,\n  useDisclosure,\n} from '@chakra-ui/core';\nimport PropTypes from 'prop-types';\nimport { useQuery } from '@apollo/react-hooks';\nimport ShopSelect from '../../common/ShopSelect';\nimport OrderListItem from '../../common/orderListItem/OrderListItem';\nimport Reshipment from '../../common/Reshipment';\nimport { OrderDetailsComp } from '../../common/OrderDetails';\nimport { CardStyle } from '../../common/DefaultStyles';\n\nexport const SHOP_ORDERS_QUERY = gql`\n  query shopOrders(\n    $domain: String!\n    $first: Int\n    $after: String\n    $before: String\n    $last: Int\n    $query: String\n  ) {\n    shopOrders(\n      domain: $domain\n      first: $first\n      after: $after\n      before: $before\n      last: $last\n      query: $query\n    ) {\n      pageInfo\n      edges\n    }\n  }\n`;\n\nexport default function CompletedOrderList({ shops }) {\n  const [client, setClient] = useState(\n    shops.length && shops[0].domain.split('.')[0]\n  );\n  const [afterCursor, setAfterCursor] = useState(null);\n  const [beforeCursor, setBeforeCursor] = useState(null);\n  const [query, setQuery] = useState('');\n  const [first, setFirst] = useState(10);\n  const [last, setLast] = useState(null);\n  const [selectedOrder, setSelectedOrder] = useState(null);\n  const [selectedOrder2, setSelectedOrder2] = useState(null);\n\n  const { isOpen, onOpen, onClose } = useDisclosure();\n  const {\n    isOpen: drawerIsOpen,\n    onOpen: drawerOnOpen,\n    onClose: drawerOnClose,\n  } = useDisclosure();\n\n  const { data, error, loading } = useQuery(SHOP_ORDERS_QUERY, {\n    variables: {\n      domain: `${client}.myshopify.com`,\n      after: afterCursor,\n      before: beforeCursor,\n      first,\n      last,\n      query,\n    },\n  });\n\n  function updateClient(arg) {\n    setClient(arg);\n    setAfterCursor(null);\n    setBeforeCursor(null);\n    setFirst(10);\n    setLast(null);\n  }\n\n  function onPrevious(arg) {\n    setAfterCursor(null);\n    setBeforeCursor(arg);\n    setFirst(null);\n    setLast(10);\n  }\n\n  function onNext(arg) {\n    setAfterCursor(arg);\n    setBeforeCursor(null);\n    setFirst(10);\n    setLast(null);\n  }\n\n  function updateDialog(arg) {\n    onOpen();\n    setSelectedOrder(arg);\n  }\n\n  function updateDrawer(arg) {\n    drawerOnOpen();\n    setSelectedOrder2(arg);\n  }\n  return (\n    <>\n      <Box display=\"flex\" py={4}>\n        <Box flex={1} alignItems=\"center\" display=\"flex\">\n          <Heading fontSize=\"2xl\" color=\"text\" fontWeight={500}>\n            Completed Orders\n          </Heading>\n        </Box>\n      </Box>\n      {selectedOrder2 && (\n        <Drawer\n          size=\"md\"\n          isOpen={drawerIsOpen}\n          placement=\"right\"\n          onClose={drawerOnClose}\n        >\n          <DrawerOverlay />\n          <DrawerContent>\n            {/* <DrawerCloseButton /> */}\n            <DrawerBody bg=\"#f9f9fb\" p={0}>\n              <Box>\n                <OrderDetailsComp\n                  {...data.shopOrders.edges.filter(\n                    order => order.node.id.split('/').pop() === selectedOrder2\n                  )[0].node}\n                  store={client}\n                  backgroundColor=\"white\"\n                  onOpen={() => updateDialog(selectedOrder2)}\n                />\n              </Box>\n            </DrawerBody>\n          </DrawerContent>\n        </Drawer>\n      )}\n      {client ? (\n        <Box {...CardStyle}>\n          <Box display=\"block\" padding=\"1em\">\n            <Box display=\"flex\">\n              <InputGroup width=\"100%\" borderColor=\"gray.300\">\n                <InputLeftElement\n                  children={<Icon name=\"search\" color=\"gray.300\" />}\n                />\n                <Input\n                  value={query}\n                  onChange={e => setQuery(e.target.value)}\n                  type=\"phone\"\n                  placeholder=\"Search\"\n                />\n              </InputGroup>\n            </Box>\n            <Box>\n              <ShopSelect\n                client={client}\n                shops={shops}\n                updateClient={updateClient}\n              />\n            </Box>\n          </Box>\n\n          {(() => {\n            if (loading)\n              return (\n                <Box\n                  display=\"flex\"\n                  alignItems=\"center\"\n                  justifyContent=\"center\"\n                  height=\"100vh\"\n                >\n                  <Spinner\n                    thickness=\"4px\"\n                    speed=\"0.65s\"\n                    emptyColor=\"gray.200\"\n                    color=\"blue.500\"\n                    size=\"xl\"\n                  />\n                </Box>\n              );\n            if (error || !data.shopOrders) return <div>{error}</div>;\n            return (\n              <>\n                <Box width=\"100%\">\n                  {selectedOrder && (\n                    <Reshipment\n                      isOpen={isOpen}\n                      onClose={onClose}\n                      order={\n                        data.shopOrders.edges.filter(\n                          order =>\n                            order.node.id.split('/').pop() === selectedOrder\n                        ).length > 0 &&\n                        data.shopOrders.edges.filter(\n                          order =>\n                            order.node.id.split('/').pop() === selectedOrder\n                        )[0].node\n                      }\n                      shop={client}\n                    />\n                  )}\n                  {data.shopOrders.edges.map((order, index) => (\n                    <Box borderTop=\"0.1rem solid #dfe3e8\">\n                      <OrderListItem\n                        key={index}\n                        disabled\n                        client={client}\n                        orderName={order.node.name}\n                        first_name={\n                          order.node.shippingAddress.name.split(' ')[0]\n                        }\n                        last_name={order.node.shippingAddress.name\n                          .split(' ')\n                          .pop()}\n                        streetAddress1={order.node.shippingAddress.address1}\n                        streetAddress2={order.node.shippingAddress.address2}\n                        city={order.node.shippingAddress.city}\n                        state={order.node.shippingAddress.province}\n                        zip={order.node.shippingAddress.zip}\n                        shopName={client}\n                        lineItems={order.node.lineItems.edges}\n                        createAt={order.node.processedAt}\n                        note={order.node.note && order.node.note}\n                        email={order.node.email}\n                        // errorText={order.node.note && order.node.note}\n                        // processText={order.node.note && order.node.note}\n                        orderId={order.node.id.split('/').pop()}\n                        buttons={\n                          <>\n                            <Button\n                              background=\"#DDEBF7\"\n                              borderRadius={3}\n                              marginRight={1}\n                              px={2}\n                              height={5}\n                              onClick={() =>\n                                updateDialog(order.node.id.split('/').pop())\n                              }\n                            >\n                              <Heading\n                                fontSize=\"xs\"\n                                fontWeight={700}\n                                color=\"#1070CA\"\n                                marginRight={2}\n                              >\n                                RESHIP\n                              </Heading>\n                              <Icon size={3} color=\"#1070CA\" name=\"repeat\" />\n                            </Button>\n                            <Link\n                              href={{\n                                pathname: '/completed',\n                              }}\n                              as={`/order?store=${client}&name=${\n                                order.node.name\n                              }`}\n                            >\n                              <Button\n                                onClick={() =>\n                                  updateDrawer(order.node.id.split('/').pop())\n                                }\n                                bg=\"transparent\"\n                                color=\"#66788a\"\n                                aria-label=\"show order\"\n                                height=\"1.3rem\"\n                                minWidth=\"1.3rem\"\n                                px={0}\n                                ml={1}\n                              >\n                                <Icon name=\"arrow-forward\" size=\"18px\" />\n                              </Button>\n                            </Link>\n                          </>\n                        }\n                      />\n                    </Box>\n                  ))}\n                </Box>\n              </>\n            );\n          })()}\n        </Box>\n      ) : (\n        <Box\n          background=\"white\"\n          display=\"flex\"\n          justifyContent=\"center\"\n          alignItems=\"center\"\n          flexDirection=\"column\"\n          borderRadius={3}\n        >\n          <Heading margin=\"1em\" size={600}>\n            Your orders will appear here after you add a shop.\n          </Heading>\n        </Box>\n      )}\n    </>\n  );\n}\n\nCompletedOrderList.propTypes = {\n  shops: PropTypes.string,\n};\n"]},"metadata":{},"sourceType":"module"}