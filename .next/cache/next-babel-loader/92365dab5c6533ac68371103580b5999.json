{"ast":null,"code":"import React, { useState } from 'react';\nimport { gql } from 'apollo-boost';\nimport { Pane, Heading, SearchInput, Spinner } from 'evergreen-ui';\nimport { Query } from 'react-apollo';\nimport ShopSelect from '../common/ShopSelect';\nimport { CardStyle } from '../common/DefaultStyles';\nimport ProductsItem from './ProductsItem';\nconst shopProducts = gql`\n  query shopProducts(\n    $domain: String!\n    $first: Int\n    $after: String\n    $before: String\n    $last: Int\n    $query: String\n  ) {\n    shopProducts(\n      domain: $domain\n      first: $first\n      after: $after\n      before: $before\n      last: $last\n      query: $query\n    ) {\n      pageInfo\n      edges\n    }\n  }\n`;\nexport default function Products({\n  shops\n}) {\n  const [client, setClient] = useState(shops.length && shops[0].domain.split('.')[0]);\n  const [afterCursor, setAfterCursor] = useState(null);\n  const [beforeCursor, setBeforeCursor] = useState(null);\n  const [query, setQuery] = useState('');\n  const [first, setFirst] = useState(10);\n  const [last, setLast] = useState(null);\n\n  function updateClient(arg) {\n    setClient(arg);\n    setAfterCursor(null);\n    setBeforeCursor(null);\n    setFirst(10);\n    setLast(null);\n  }\n\n  function onPrevious(arg) {\n    setAfterCursor(null);\n    setBeforeCursor(arg);\n    setFirst(null);\n    setLast(10);\n  }\n\n  function onNext(arg) {\n    setAfterCursor(arg);\n    setBeforeCursor(null);\n    setFirst(10);\n    setLast(null);\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(Pane, {\n    display: \"flex\",\n    paddingTop: 16,\n    paddingBottom: 16\n  }, React.createElement(Pane, {\n    flex: 1,\n    alignItems: \"center\",\n    display: \"flex\"\n  }, React.createElement(Heading, {\n    size: 700\n  }, \"Products\"))), client ? React.createElement(Pane, CardStyle, React.createElement(Pane, {\n    display: \"flex\",\n    padding: \"1em\"\n  }, React.createElement(Pane, {\n    flex: 1\n  }, React.createElement(SearchInput, {\n    placeholder: \"Search\",\n    width: \"100%\",\n    height: 36,\n    value: query,\n    onChange: e => setQuery(e.target.value)\n  }), React.createElement(ShopSelect, {\n    client: client,\n    shops: shops,\n    updateClient: updateClient\n  }))), React.createElement(Query, {\n    query: shopProducts,\n    variables: {\n      domain: `${client}.myshopify.com`,\n      first,\n      last,\n      after: afterCursor,\n      before: beforeCursor,\n      query\n    }\n  }, ({\n    data,\n    error,\n    loading\n  }) => {\n    if (loading) return React.createElement(Pane, {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      height: \"100vh\"\n    }, React.createElement(Spinner, {\n      size: 80\n    }));\n    if (error || !data.shopProducts) return React.createElement(\"h1\", null, \"Error loading shops: \", error);\n    return React.createElement(Pane, {\n      width: \"100%\"\n    }, data.shopProducts.edges.map(product => React.createElement(ProductsItem, {\n      client: client,\n      product: product.node\n    })));\n  })) : React.createElement(Pane, {\n    background: \"white\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    flexDirection: \"column\",\n    borderRadius: 3\n  }, React.createElement(Heading, {\n    margin: \"1em\",\n    size: 600\n  }, \"Your products will appear here after you add a shop.\")));\n}","map":null,"metadata":{},"sourceType":"module"}